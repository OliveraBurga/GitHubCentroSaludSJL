"use strict";(self.webpackChunkpoliclinico=self.webpackChunkpoliclinico||[]).push([[149],{149:(n,a,t)=>{let e,o;t.r(a),t.d(a,{default:()=>s});let i={render:async n=>{$("#main").off(),n.innerHTML='\n \n         <div id="main">\n             \x3c!-- Content Header (Page header) --\x3e\n             <section class="content-header">\n                 <div class="row">\n                     <div class="col-md-8 content-header" style="padding-top:5px;">\n                         <h1 style="margin:0; ">\n                             Autorización de Gastos\n                             <small>Tesoreria</small>\n                         </h1>\n                     </div>\n                     <div class="col-md-4" align="right">\n                         <button type="button" class="btn btn-sm btn-warning" name="nuevo"><i class="fa fa-plus"></i> Nuevo</button>\n                     </div>\n                 </div>\n                 </section>\n \n                 \x3c!-- Main content --\x3e\n                 <section class="content">\n \n                 <div class="row"> \n                    <div class="col-md-1">\n                        <button class="btn btn-warning" name="update_datatable" style="margin-bottom:10px;"><i class="fa fa-sync"></i> Actualizar</button>\n                    </div>\n                </div>\n \n                 \x3c!-- Default box --\x3e\n                 <div class="box box-warning">\n                     <div class="box-body">\n                     <div class="table-responsive">\n                         <table name="registros" class="table table-striped" style="width:100%;"></table>\n                     </div>\n                     </div>\n                 </div>\n                 \x3c!-- /.box --\x3e\n \n             </section>\n             \x3c!-- /.content --\x3e\n \n             \x3c!-- MODAL APROBADO --\x3e\n             <div class="modal inmodal fade" name="modal-autorizado" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">\n                 <div class="modal-dialog modal-sm">\n                     <div class="modal-content">\n                         <div class="modal-header">\n                             <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>\n                             <h4 name="autorizado" class="modal-title">Modal title</h4>\n                         </div>\n                         <form name="autorizado">\n                             <div class="modal-body">\n                                <div class="row">\n                                    <div class="col-md-12" align="center" style="margin-top:10px;">\n                                        <i class="fad fa-thumbs-up fa-4x"></i><br/>\n                                    </div>\n                                    <div class="col-md-12"  align="center" style="padding-top:10px;">\n                                        <label><input type="checkbox" name="confirmacion" required/>\n                                            Confirmo realizar la autorización</label>\n                                         \n                                    </div>\n                                    <div class="col-md-12" name="texto" align="center" style="font-weight:bold; font-size:20px;"></div>\n                                    <div class="col-md-12" style="margin-top:10px;">\n                                        <div class="form-group">\n                                            <label>Comentario / Observación <small>(Opcional)</small></label>\n                                            <input type="text" name="comentario" class="form-control" autocomplete="off">\n                                        </div>                         \n                                    </div>\n                                </div>\n                             </div>\n                             <div class="modal-footer" align="center" style="display:block" >\n                                 <button type="button" name="cerrar" class="btn btn-white" data-dismiss="modal">Cerrar</button>\n                                 <button type="submit" name="submit" class="btn btn-success">Autorizar Ahora!</button>\n                             </div>\n                         </form>\n                     </div>\n                 </div>\n             </div>\n \n             \x3c!-- MODAL DEENGADO --\x3e\n             <div class="modal inmodal fade" name="modal-denegado" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">\n                 <div class="modal-dialog modal-sm">\n                     <div class="modal-content">\n                         <div class="modal-header">\n                             <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>\n                             <h4 name="denegado" class="modal-title">Modal title</h4>\n                         </div>\n                         <form name="denegado">\n                             <div class="modal-body">\n                                <div class="row">\n                                    <div class="col-md-12" align="center" style="margin-top:10px;">\n                                        <i class="fad fa-thumbs-down fa-4x"></i><br/>\n                                    </div>\n                                    <div class="col-md-12"  align="center" style="padding-top:10px;">\n                                        <label><input type="checkbox" name="confirmacion" required/>\n                                            Confirmo realizar la denegación</label>\n                                        <p style="color:red;">Esta acción no se podrá revertir y se dará por anulado la solicitud de caja</p>\n                                    </div>\n                                    <div class="col-md-12" name="texto" align="center" style="font-weight:bold; font-size:20px;"></div>\n                                    <div class="col-md-12" style="margin-top:10px;">\n                                        <div class="form-group">\n                                            <label>Comentario / Observación <small>(Opcional)</small></label>\n                                            <input type="text" name="comentario" class="form-control" autocomplete="off">\n                                        </div>                         \n                                    </div>\n                                </div>\n                             </div>\n                             <div class="modal-footer" align="center" style="display:block" >\n                                 <button type="button" name="cerrar" class="btn btn-white" data-dismiss="modal">Cerrar</button>\n                                 <button type="submit" name="submit" class="btn btn-danger">Denegar Ahora!</button>\n                             </div>\n                         </form>\n                     </div>\n                 </div>\n             </div>\n         \n \n         </div>            \n         ',i.after_render()},after_render:async()=>{o="#main",e=$(o),e.find('form[name="autorizado"]').validate({submitHandler:function(){i.submit()}}),e.on("click",'button[name="update_datatable"]',(function(n){n.stopImmediatePropagation(),i.table.ajax.reload(null,!1)})),e.find('form[name="denegado"]').validate({submitHandler:function(){i.submit()}}),e.on("click",'button[name="row-autorizar"]',(function(n){n.stopImmediatePropagation(),i.autorizado($(this))})),e.on("click",'button[name="row-denegar"]',(function(n){n.stopImmediatePropagation(),i.denegado($(this))})),i.datatable(),HELPER.load_component()},id:null,action_submit:null,imagen_anterior:null,fl_auto_event:!0,datatable:function(){this.table=e.find('table[name="registros"]').DataTable({ajax:{url:BASE_API+"tesoreria/autorizacion_gasto",data:function(n){n.tipo="CAJA"}},columns:[{title:"ACCIÓN",defaultContent:"",render:function(n,a,t){return'\n                            <button type="button" class="btn btn-success btn-sm" name="row-autorizar"><i class="fa fa-thumbs-up"></i> AUTORIZAR</button>  \n                            <button type="button" class="btn btn-danger btn-sm" name="row-denegar"><i class="fa fa-thumbs-down"></i> DENEGAR</button>  \n                         '},width:"170px"},{title:"FECHA",render:function(n,a,t){return HELPER.fecha(t.fecha)}},{title:"NRO CAJA",mData:"caja"},{title:"ATENCION",mData:"atencion"},{title:"MOTIVO",mData:"motivo"},{title:"MODALIDAD",mData:"modalidad"},{title:"PERSONA",mData:"nombre_persona"},{title:"IMPORTE",render:function(n,a,t){return t.simbolo_moneda+" "+t.importe},class:"text-right"},{title:"USUARIO",mData:"usuario"}],createdRow:function(n,a,t){$(n).attr("data-json",JSON.stringify(a)),0==a.fl_estado&&($(n).css("text-decoration","line-through"),$(n).css("color","red"))}})},autorizado:function(n){let a="autorizado",t=e.find('form[name="'+a+'"]');e.find('h4[name="'+a+'"]').text("Autorizar Gasto"),HELPER.reset_form(t);let o=HELPER.get_attr_json(n);t.find('div[name="texto"]').html(o.serie+"-"+o.numero+" <br>"+o.simbolo_moneda+" "+o.importe),this.id=o.id,this.action_submit=a,e.find('div[name="modal-'+a+'"]').modal("show")},denegado:function(n){let a="denegado",t=e.find('form[name="'+a+'"]');e.find('h4[name="'+a+'"]').text("Denegar Gasto"),HELPER.reset_form(t);let o=HELPER.get_attr_json(n);t.find('div[name="texto"]').text(o.serie+"-"+o.numero),this.id=o.id,this.action_submit=a,e.find('div[name="modal-'+a+'"]').modal("show")},submit:function(){let n=HELPER.ladda(o+' form[name="'+this.action_submit+'"] button[type="submit"]'),a=new FormData(document.querySelector(o+' form[name="'+this.action_submit+'"]'));null!=this.id&&a.append("id",this.id),axios({method:"post",url:BASE_API+"tesoreria/autorizacion_gasto/"+this.action_submit,data:a}).then((function(a){i.table.ajax.reload(null,!1),e.find('div[name="modal-'+i.action_submit+'"]').modal("hide"),HELPER.notificacion(a.data.mensaje,"success"),n.stop()})).catch((a=>{n.stop()}))}};const s=i}}]);