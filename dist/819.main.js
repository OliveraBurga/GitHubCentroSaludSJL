"use strict";(self.webpackChunkpoliclinico=self.webpackChunkpoliclinico||[]).push([[819],{178:(a,n,e)=>{e.d(n,{Z:()=>o});let t={Unidades:function(a){switch(a){case 1:return"UN";case 2:return"DOS";case 3:return"TRES";case 4:return"CUATRO";case 5:return"CINCO";case 6:return"SEIS";case 7:return"SIETE";case 8:return"OCHO";case 9:return"NUEVE"}return""},Decenas:function(a){let n=Math.floor(a/10),e=a-10*n;switch(n){case 1:switch(e){case 0:return"DIEZ";case 1:return"ONCE";case 2:return"DOCE";case 3:return"TRECE";case 4:return"CATORCE";case 5:return"QUINCE";default:return"DIECI"+this.Unidades(e)}case 2:return 0===e?"VEINTE":"VEINTI"+this.Unidades(e);case 3:return this.DecenasY("TREINTA",e);case 4:return this.DecenasY("CUARENTA",e);case 5:return this.DecenasY("CINCUENTA",e);case 6:return this.DecenasY("SESENTA",e);case 7:return this.DecenasY("SETENTA",e);case 8:return this.DecenasY("OCHENTA",e);case 9:return this.DecenasY("NOVENTA",e);case 0:return this.Unidades(e)}},DecenasY:function(a,n){return n>0?a+" Y "+this.Unidades(n):a},Centenas:function(a){let n=Math.floor(a/100),e=a-100*n;switch(n){case 1:return e>0?"CIENTO "+this.Decenas(e):"CIEN";case 2:return"DOSCIENTOS "+this.Decenas(e);case 3:return"TRESCIENTOS "+this.Decenas(e);case 4:return"CUATROCIENTOS "+this.Decenas(e);case 5:return"QUINIENTOS "+this.Decenas(e);case 6:return"SEISCIENTOS "+this.Decenas(e);case 7:return"SETECIENTOS "+this.Decenas(e);case 8:return"OCHOCIENTOS "+this.Decenas(e);case 9:return"NOVECIENTOS "+this.Decenas(e)}return this.Decenas(e)},Seccion:function(a,n,e,t){let o=Math.floor(a/n),i=a-o*n,l="";return o>0&&(l=o>1?this.Centenas(o)+" "+t:e),i>0&&(l+=""),l},Miles:function(a){let n=1e3,e=a-Math.floor(a/n)*n,t=this.Seccion(a,n,"MIL","MIL"),o=this.Centenas(e);return""==t?o:t+" "+o},Millones:function(a){let n=1e6,e=a-Math.floor(a/n)*n,o=t.Seccion(a,n,"UN MILLON DE","MILLONES DE"),i=t.Miles(e);return""==o?i:o+" "+i},convertir:function(a,n="SOLES"){var e={numero:a,enteros:Math.floor(a),centavos:Math.round(100*a)-100*Math.floor(a),letrasCentavos:"",letrasMonedaPlural:n,letrasMonedaSingular:n,letrasMonedaCentavoPlural:"CÉNTIMOS",letrasMonedaCentavoSingular:"CÉNTIMOS"};return e.letrasCentavos="CON "+(e.centavos,("0"==e.centavos?"00":e.centavos)+"/100 "),0==e.enteros?"CERO "+e.letrasMonedaPlural:(e.enteros,this.Millones(e.enteros)+" "+e.letrasCentavos+e.letrasMonedaSingular)}};const o=t},819:(a,n,e)=>{e.r(n),e.d(n,{default:()=>s});var t=e(376);let o,i,l={render:async(a,n="CAJA")=>{let e="Caja";"CAJA_RAPIDA"==n&&(e="Caja Rápida"),$("#main").off(),a.innerHTML='\n\n        <div id="main">\n            \x3c!-- Content Header (Page header) --\x3e\n            <section class="content-header">\n                <div class="row">\n                    <div class="col-md-8 content-header" style="padding-top:5px;">\n                        <h1 style="margin:0; ">\n                            '+e+'\n                            <small>Tesoreria</small>\n                        </h1>\n                    </div>\n                    <div class="col-md-4" align="right">\n                        <button type="button" class="btn btn-sm btn-warning" name="nuevo"><i class="fa fa-plus"></i> Nuevo</button>\n                    </div>\n                </div>\n                </section>\n\n                \x3c!-- Main content --\x3e\n                <section class="content">\n\n                \x3c!-- Default box --\x3e\n                <div class="box box-warning">\n                  <div class="box-body">\n                    <div class="row">        \n                      <div class="col-md-2">\n                        <div class="form-group">\n                            <label>Fecha Desde</label>\n                            <input type="date" name="fecha_inicio" id="fecha_inicio" class="form-control" autocomplete="off">\n                        </div>\n                      </div>\n                      <div class="col-md-2">\n                        <div class="form-group">\n                            <label>Fecha Hasta</label>\n                            <input type="date" name="fecha_fin" id="fecha_fin" class="form-control" autocomplete="off">\n                        </div>\n                      </div>\n                      <div class="col-md-1" style="padding-top:19px;">\n                        <button class="btn btn-warning" name="update_datatable"><i class="fa fa-search"></i> Buscar</button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                \x3c!-- /.box --\x3e\n\n                \x3c!-- Default box --\x3e\n                <div class="box box-warning">\n                    <div class="box-body">\n                    <div class="table-responsive">\n                        <table name="registros" class="table table-striped nowrap" style="width:100%;"></table>\n                    </div>\n                    </div>\n                </div>\n                \x3c!-- /.box --\x3e\n\n            </section>\n            \x3c!-- /.content --\x3e\n\n            \x3c!-- MODAL SAVE --\x3e\n            <div class="modal inmodal fade" name="modal-save" data-backdrop="static"  role="dialog" aria-hidden="true">\n                <div class="modal-dialog modal-lg">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>\n                            <h4 name="save" class="modal-title">Modal title</h4>\n                        </div>\n                        <form name="save">\n                            <div class="modal-body">\n                                <div class="row">\n                                    <div class="col-md-4">\n                                        <div class="form-group">\n                                            <label>Fecha <span class="text-red">(*)</span></label>\n                                            <div class="form-group">\n                                            <input type="date" class="form-control" name="fecha" />\n                                            </div>                              \n                                        </div>\n                                    </div>\n                                    <div class="col-md-4">\n                                        <div class="form-group">\n                                            <label>Serie <span class="text-red">(*)</span></label>\n                                            <div class="form-group">\n                                            <input type="text" class="form-control" name="serie" disabled />\n                                            </div>                              \n                                        </div>\n                                    </div>\n                                    <div class="col-md-4">\n                                        <div class="form-group">\n                                            <label>Número <span class="text-red">(*)</span></label>\n                                            <div class="form-group">\n                                            <input type="text" class="form-control" name="numero" disabled/>\n                                            </div>                              \n                                        </div>\n                                    </div>\n                                    <div class="col-md-4">\n                                        <div class="form-group">\n                                            <label>Atencion  <small>(  )</small></label>\n                                            <div class="form-group">\n                                            <select name="id_atencion" data-select="ATENCION" class="form-control"></select>\n                                            </div>                              \n                                        </div>\n                                    </div>\n                                    <div class="col-md-4">\n                                        <div class="form-group">\n                                            <label>Motivo <span class="text-red">(*)</span></label>\n                                            <input type="text" name="motivo" class="form-control" list="list-motivo_caja" autocomplete="off" />\n                                            <datalist id="list-motivo_caja">\n                                                <option value="PAGO ATENCION" />\n                                               \n                                                <option value="OTROS" />\n                                            </datalist>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-4">\n                                        <div class="form-group">\n                                            <label>Modalidad de Pago <span class="text-red">(*)</span></label>\n                                            <select data-select="FORMA_PAGO" name="modalidad" class="form-control"></select>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-4">\n                                        <div class="form-group">\n                                            <label>Moneda <span class="text-red">(*)</span></label>\n                                            <select name="id_moneda" data-select="MONEDA" class="form-control select"></select>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-4">\n                                        <div class="form-group">\n                                            <label>Tipo Cambio <span class="text-red">(*)</span></label>\n                                            <input type="number" step="any" name="tipo_cambio" class="form-control" autocomplete="off">\n                                        </div>\n                                    </div>      \n                                    <div class="col-md-4">\n                                        <div class="form-group">\n                                            <label>Importe <span class="text-red">(*)</span></label>\n                                            <input type="text" name="importe" class="form-control" autocomplete="off">\n                                        </div>                         \n                                    </div>  \n                                    <div class="col-md-8">\n                                        <div class="form-group">\n                                            <label>Descripción <span class="text-red">(*)</span></label>\n                                            <input type="text" class="form-control" name="descripcion" />                             \n                                        </div>\n                                    </div>\n                                    <div style="display:none"  class="col-md-4">\n                                        <div class="form-group">\n                                            <label>Local</label>\n                                            <select name="id_local" data-select="LOCAL" class="form-control select"></select>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-4">\n                                        <div class="form-group">\n                                            <label>Tipo Persona <span class="text-red">(*)</span></label>\n                                            <select name="tipo_persona" class="form-control select">\n                                                <option value="">Seleccione...</option>\n                                                <option value="ADMINISTRATIVO">ADMINISTRATIVO</option>\n                                                <option value="BIOLOGO">BIOLOGO</option>\n                                                <option value="ENFERMERA">ENFERMERA</option>\n                                                <option value="MEDICO">MEDICO</option>\n                                                <option value="MICROBIOLOGO">MICROBIOLOGO</option>\n                                                <option value="PSICOLOGO">PSICOLOGO</option>\n                                                <option value="TEC.ENFERMERA">TEC.ENFERMERA</option>\n                                                option value="TECNOLOGO MEDICO">TECNOLOGO MEDICO</option>\n                                                <option value="OTRO">OTRO</option>\n                                            </select>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-8" data-campo="id_tipo_persona">\n                                        <div class="form-group">\n                                            <label>Persona <span class="text-red">(*)</span></label>\n                                            <select name="id_tipo_persona" data-select="ID_TIPO_PERSONA" class="form-control"></select>                          \n                                        </div>\n                                    </div>\n                                    <div class="col-md-8" data-campo="nombre_persona">\n                                        <div class="form-group">\n                                            <label>Nombre completo de persona <span class="text-red">(*)</span></label>\n                                            <input type="text" name="nombre_persona" class="form-control" autocomplete="off">                 \n                                        </div>\n                                    </div>\n                                    <div class="col-md-6" data-campo="id_cuenta_bancaria_persona">\n                                        <div class="form-group">\n                                            <label>Cuenta Bancaria de Persona <span class="text-red">(*)</span></label>\n                                            <select name="id_cuenta_bancaria_persona" data-select="ID_CUENTA_BANCARIA_PERSONA" class="form-control"></select>                          \n                                        </div>\n                                    </div>\n                                    <div class="col-md-6" data-campo="cuenta_bancaria_persona">\n                                        <div class="form-group">\n                                            <label>Cuenta Bancaria de Persona <span class="text-red">(*)</span></label>\n                                            <input type="text" name="cuenta_bancaria_persona" class="form-control" autocomplete="off">                 \n                                        </div>\n                                    </div>\n                                    <div class="col-md-6">\n                                        <div class="form-group">\n                                            <label>Cuenta Bancaria de Empresa</label>\n                                            <select name="id_cuenta_bancaria_empresa" data-select="CUENTA_BANCARIA_EMPRESA" class="form-control"></select>                          \n                                        </div>\n                                    </div>\n                                    <div class="col-md-12">\n                                        <div class="form-group">\n                                            <label>Observación</label>\n                                            <textarea name="observacion" class="form-control"></textarea>                          \n                                        </div>\n                                    </div>\n                                    \n                                    <div class="col-md-12" style="display:'+("CAJA_RAPIDA"!=n?"block":"none")+'">\n                                        <div class="callout callout-info" style="background-color:#fff !important; margin-bottom:0; padding:12px; margin-bottom:10px;">\n                                        <h4 style="color:#0097bc; margin-bottom:0;">ATENCIÓN:</h4>\n                                        <p style="color:#004a95">Esta solicitud de caja será evaluado y autorizado por un usuario encargado.</p>\n                                        </div>\n                                    </div>\n                                                    \n                                </div>\n                            </div>\n                            <div class="modal-footer" align="center" style="display:block">\n                                <button type="button" name="cerrar" class="btn btn-white pull-left" data-dismiss="modal">Cerrar</button>\n                                <button type="submit" name="submit" class="btn btn-primary">Guardar</button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n\n            \x3c!-- MODAL DELETE --\x3e\n            <div class="modal inmodal fade" name="modal-delete" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">\n                <div class="modal-dialog modal-sm">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>\n                            <h4 name="delete" class="modal-title">Modal title</h4>\n                        </div>\n                        <form name="delete">\n                            <div class="row">\n                                <div class="col-md-12" align="center">\n                                    <i class="fad fa-trash-alt fa-4x"></i><br/>\n                                </div>\n                                <div class="col-md-12"  align="center" style="padding-top:10px;">\n                                    <label><input type="checkbox" name="confirmacion" required/>\n                                        Confirmo realizar la anulación</label>\n                                    <p style="color:red;">Esta acción no se podrá revertir</p>\n                                </div>\n                                <div class="col-md-12" name="texto" align="center">\n\n                                </div>\n                            </div>\n                            <div class="modal-footer" align="center" style="display:block" >\n                                <button type="button" name="cerrar" class="btn btn-white" data-dismiss="modal">Cerrar</button>\n                                <button type="submit" name="submit" class="btn btn-danger">Anular Ahora!</button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        \n\n        </div>            \n        ',l.after_render(n)},after_render:async a=>{i="#main",o=$(i),o.find('form[name="save"]').validate({rules:{fecha:{required:!0},motivo:{required:!0},modalidad:{required:!0},id_moneda:{required:!0},importe:{required:!0},descripcion:{required:!0},tipo_persona:{required:!0},id_tipo_persona:{required:!0},nombre_persona:{required:!0},id_cuenta_bancaria_persona:{required:!0},cuenta_bancaria_persona:{required:!0},tipo_cambio:{required:!0}},messages:{fecha:"Fecha",motivo:"Motivo",modalidad:"Modalidad",id_moneda:"Moneda",importe:"Importe",descripcion:"Descripción",tipo_persona:"Tipo de Persona",id_tipo_persona:"Persona",nombre_persona:"Persona",id_cuenta_bancaria_persona:"Cuenta Bancaria de la Persona",cuenta_bancaria_persona:"Cuenta Bancaria de la Persona",tipo_cambio:"Tipo Cambio"},submitHandler:function(){l.submit()}}),o.on("click",'button[name="update_datatable"]',(function(a){a.stopImmediatePropagation(),l.table.ajax.reload(null,!1)})),o.find('form[name="delete"]').validate({submitHandler:function(){l.submit()}}),o.on("click",'button[name="nuevo"]',(function(a){a.stopImmediatePropagation(),l.new()})),o.on("click",'button[name="row-print"]',(function(a){a.stopImmediatePropagation();let n=HELPER.get_attr_json($(this));t.Z.print(n.id)})),o.on("click",'a[name="row-edit"]',(function(a){a.stopImmediatePropagation(),l.edit($(this))})),o.on("click",'a[name="row-delete"]',(function(a){a.stopImmediatePropagation(),l.delete($(this))})),o.on("change",'select[name="tipo_persona"]',(function(a){a.stopImmediatePropagation(),1==l.fl_auto_event&&(l.change_tipo_persona(),l.select_cuenta_bancaria_persona())})),o.on("change",'select[name="id_tipo_persona"]',(function(a){a.stopImmediatePropagation(),1==l.fl_auto_event&&(l.select_cuenta_bancaria_persona(),l.change_id_tipo_persona())})),o.on("change",'select[name="id_cuenta_bancaria_persona"]',(function(a){a.stopImmediatePropagation(),1==l.fl_auto_event&&l.change_id_cuenta_bancaria_persona()})),o.on("change",'select[name="modalidad"]',(function(a){a.stopImmediatePropagation(),1==l.fl_auto_event&&l.change_tipo_persona()})),o.on("change",'select[name="id_moneda"]',(function(a){a.stopImmediatePropagation(),1==l.fl_auto_event&&(l.select_cuenta_bancaria_empresa(),l.change_moneda())})),o.on("change",'select[name="id_atencion"]',(function(a){a.stopImmediatePropagation(),1==l.fl_auto_event&&(l.change_atencion(),l.get_unique_atencion())})),o.find('input[name="fecha_inicio"]').val(HELPER.primer_dia_mes()),o.find('input[name="fecha_fin"]').val(HELPER.fecha_actual()),l.tipo=a,l.datatable(),l.select_atencion(),l.select_cuenta_bancaria_empresa(),l.select_moneda(),l.select_local(),l.select_medio_pago(),HELPER.load_component()},id:null,action_submit:null,imagen_anterior:null,fl_auto_event:!0,tipo:null,select_medio_pago:()=>{let a=o.find('select[data-select="FORMA_PAGO"]');a.empty(),a.append($("<option></option>").attr("value","").text("Seleccionar...")),axios.get(BASE_API+"configuracion/forma_pago/get_select").then((function(n){n.data.forEach((n=>{a.append('<option value="'+n.text+'" data-fl_numero_operacion="'+n.fl_numero_operacion+'">'+n.text+"</option>")})),a.select2()})).catch((a=>{console.log(a)}))},change_moneda:async(a=!0)=>{let n=o.find('select[name="id_moneda"]').val();1==n?(o.find('input[name="tipo_cambio"]').prop("disabled",!0),o.find('input[name="tipo_cambio"]').val("")):""!=n&&(o.find('input[name="tipo_cambio"]').prop("disabled",!1),a&&o.find('input[name="tipo_cambio"]').val(await HELPER.get_tipo_cambio(n)))},change_atencion:async()=>{let a=o.find('select[name="id_atencion"]').val();null!=a?await axios.get(BASE_API+"tesoreria/caja/get_atencion/"+a).then((function(a){o.find('select[name="id_moneda"]').val(a.data.id_moneda).change(),o.find('div[data-campo="fl_no_liquidacion_atencion"]').show()})).catch((a=>{console.log(a)})):(o.find('div[data-campo="fl_no_liquidacion_atencion"]').hide(),o.find('input[name="fl_no_liquidacion_atencion"]').prop("checked",!1))},get_unique_atencion:async()=>{let a=o.find('select[name="id_atencion"]').val();null!=a?await axios.get(BASE_API+"operacion/atencion/get_atencion_importe/"+a).then((function(a){o.find('input[name="importe"]').val(a.data.total),o.find('input[name="descripcion"]').val(a.data.servicio)})).catch((a=>{console.log(a)})):(o.find('div[data-campo="fl_no_liquidacion_atencion"]').hide(),o.find('input[name="fl_no_liquidacion_atencion"]').prop("checked",!1))},select_moneda:async()=>{let a=o.find('select[data-select="MONEDA"]');await axios.get(BASE_API+"recursos/data_static/moneda").then((function(n){let e='<option value="">Seleccione...</option>';n.data.forEach((a=>{e+='<option value="'+a.id+'">'+a.text+"</option>"})),a.html(e),a.select2()})).catch((a=>{console.log(a)}))},select_local:async()=>{let a=o.find('select[data-select="LOCAL"]');await axios.get(BASE_API+"configuracion/local/get_select").then((function(n){let e='<option value="">Seleccione...</option>';n.data.forEach((a=>{e+='<option value="'+a.id+'">'+a.text+"</option>"})),a.html(e),a.select2()})).catch((a=>{console.log(a)}))},change_id_tipo_persona:async()=>{if("OTRO"!=o.find('select[name="tipo_persona]').val()){let a=o.find('select[name="id_tipo_persona"] option:selected').text();o.find('input[name="nombre_persona"]').val(a)}},change_id_cuenta_bancaria_persona:async()=>{if("OTRO"!=o.find('select[name="tipo_persona]').val()){let a=o.find('select[name="id_cuenta_bancaria_persona"] option:selected').text();o.find('input[name="cuenta_bancaria_persona"]').val(a)}},select_cuenta_bancaria_persona:async()=>{let a=o.find('select[name="id_tipo_persona"]').val(),n=o.find('select[name="tipo_persona"]').val(),e=o.find('select[data-select="ID_CUENTA_BANCARIA_PERSONA"]');e.empty(),e.append($("<option></option>").attr("value","").text("Seleccione...")),""!=a&&null!=a&&await axios.get(BASE_API+"configuracion/cuenta_bancaria_persona/get_select?tipo="+n+"&id="+a).then((function(a){a.data.forEach((a=>{e.append('<option value="'+a.id+'">'+a.text+"</option>")})),e.select2()})).catch((a=>{console.log(a)}))},change_tipo_persona:async()=>{let a,n=o.find('select[name="tipo_persona"]').val(),e=!0;o.find('div[data-campo="id_tipo_persona"]').show(),o.find('select[name="id_tipo_persona"]').prop("disabled",!1),o.find('div[data-campo="nombre_persona"]').hide(),"OTRO"!=n?a=BASE_API+"configuracion/personal/get_select?tipo="+n:(e=!1,o.find('select[name="id_tipo_persona"]').prop("disabled",!0),o.find('div[data-campo="id_tipo_persona"]').hide(),o.find('div[data-campo="nombre_persona"]').show()),e&&await l.select_tipo_persona(a);let t=o.find('select[name="modalidad"]').val();o.find('select[name="id_cuenta_bancaria_persona"]').prop("disabled",!1),o.find('input[name="cuenta_bancaria_persona"]').prop("disabled",!1),o.find('div[data-campo="id_cuenta_bancaria_persona"]').show(),o.find('div[data-campo="cuenta_bancaria_persona"]').hide(),"EFECTIVO"!=t?"OTRO"==n?(o.find('select[name="id_cuenta_bancaria_persona"]').prop("disabled",!0),o.find('div[data-campo="id_cuenta_bancaria_persona"]').hide(),o.find('div[data-campo="cuenta_bancaria_persona"]').show()):(o.find('div[data-campo="id_cuenta_bancaria_persona"]').show(),o.find('div[data-campo="cuenta_bancaria_persona"]').hide()):(o.find('select[name="id_cuenta_bancaria_persona"]').prop("disabled",!0),o.find('input[name="cuenta_bancaria_persona"]').prop("disabled",!0))},select_tipo_persona:async a=>{let n=o.find('select[data-select="ID_TIPO_PERSONA"]');await axios.get(a).then((function(a){let e='<option value="">Seleccione...</option>';a.data.forEach((a=>{e+='<option value="'+a.id+'">'+a.text+"</option>"})),n.html(e),n.select2()})).catch((a=>{console.log(a)}))},select_cuenta_bancaria_empresa:async()=>{let a=o.find('select[data-select="CUENTA_BANCARIA_EMPRESA"]');a.empty(),a.append($("<option></option>").attr("value","").text("Seleccionar..."));let n=o.find('select[name="id_moneda"]').val();""!=n&&await axios.get(BASE_API+"configuracion/cuenta_bancaria_empresa/get_select?id_moneda="+n).then((function(n){n.data.forEach((n=>{a.append('<option value="'+n.id+'">'+n.text+"</option>")})),a.select2()})).catch((a=>{console.log(a)}))},select_atencion:async()=>{o.find('select[data-select="ATENCION"]').select2({ajax:{url:BASE_API+"operacion/atencion/get_select",dataType:"json",delay:250,data:function(a){return{buscar:a.term}},processResults:function(a,n){return{results:a}},cache:!0},escapeMarkup:function(a){return a},placeholder:"Buscar por Serie-Número o dia/mes/año ",minimumInputLength:6,allowClear:!0})},datatable:function(){this.table=o.find('table[name="registros"]').DataTable({ajax:{url:BASE_API+"tesoreria/caja",data:function(a){a.fecha_inicio=o.find('input[name="fecha_inicio"]').val(),a.fecha_fin=o.find('input[name="fecha_fin"]').val(),a.tipo=l.tipo}},columns:[{title:"ACCIÓN",defaultContent:"",render:function(a,n,e){return'\n                            <div class="btn-group" style="width:120px;">\n                                <button type="button" class="btn btn-default btn-sm" name="row-print">VISUALIZAR</button>     \n                                <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown">\n                                      <i class="fa fa-angle-down"></i>\n                                </button>\n                                <ul class="dropdown-menu dropdown-menu-left" role="menu">\n                                    <li><a class="dropdown-item" name="row-edit" href="javascript:"><i class="far fa-pencil"></i> Editar</a></li>\n                                    <li><a class="dropdown-item" name="row-delete" href="javascript:"><i class="far fa-ban"></i> Anular</a></li>\n                                </ul>\n                            </div>\n                        '},width:"100px"},{title:"FECHA",render:function(a,n,e){return HELPER.fecha(e.fecha)}},{title:"NÚMERO",mData:"caja"},{title:"TIPO",render:function(a,n,e){let t="";return t="CAJA_RAPIDA"==e.tipo?'<small class="label label-info"> CAJA RÁPIDA</small>':'<small class="label label-default"> REGULAR</small>',t}},{title:"TIPO MOVIMIENTO",mData:"tipo_movimiento"},{title:"ATENCION",mData:"atencion"},{title:"MOTIVO",mData:"motivo"},{title:"MODALIDAD",mData:"modalidad"},{title:"DESCRIPCION",mData:"descripcion"},{title:"PERSONA",mData:"nombre_persona"},{title:"IMPORTE",render:function(a,n,e){return e.simbolo_moneda+" "+e.importe},class:"text-right"},{title:"TIPO CAMBIO",mData:"tipo_cambio"},{title:"ESTADO",defaultContent:"",render:function(a,n,e){let t="";return 0==e.fl_estado?t='\n                                <small class="label label-danger"> ANULADO</small>\n                            ':1==e.fl_estado?t='\n                                <small class="label label-default"> EN EVALUACIÓN</small>\n                            ':2==e.fl_estado?t='\n                                <small class="label label-primary"> APROBADO</small>\n                            ':3==e.fl_estado&&(t='\n                                <small class="label label-success"> PROCESADO</small>\n                            '),t}},{title:"COMENTARIO",mData:"comentario_autorizacion",visible:"CAJA_RAPIDA"!=l.tipo}],createdRow:function(a,n,e){$(a).attr("data-json",JSON.stringify(n)),0==n.fl_estado&&($(a).css("text-decoration","line-through"),$(a).css("color","red"))}})},get_correlativo:async()=>{await axios.get(BASE_API+"tesoreria/caja/get_correlativo").then((function(a){o.find('input[name="numero"]').val(a.data.numero),o.find('input[name="serie"]').val(a.data.serie)})).catch((a=>{console.log(a)}))},new:function(){let a=o.find('form[name="save"]');o.find('h4[name="save"]').text("Nueva Caja"),HELPER.reset_form(a),a.find('input[name="fecha"]').val(HELPER.fecha_actual()),this.get_correlativo(),a.find('select[name="id_moneda"]').val(1).change(),a.find('select[name="id_local"]').val(GLOBAL.usuario.id_local).change(),this.id=null,this.action_submit="save",o.find('tbody[name="detalle-cuenta_bancaria"]').html(""),o.find('div[name="modal-save"]').modal("show")},edit:async a=>{let n=o.find('form[name="save"]');o.find('h4[name="save"]').text("Editar Caja"),HELPER.reset_form(n);let e=HELPER.get_attr_json(a);l.fl_auto_event=!1,n.find('input[name="fecha"]').val(e.fecha),n.find('input[name="serie"]').val(e.serie),n.find('input[name="numero"]').val(e.numero),null!=e.id_atencion&&(n.find('select[name="id_atencion"]').html(""),n.find('select[name="id_atencion"]').append(new Option(e.atencion,e.id_atencion))),n.find('input[name="descripcion"]').val(e.descripcion),n.find('input[name="motivo"]').val(e.motivo).change(),n.find('select[name="modalidad"]').val(e.modalidad).change(),n.find('input[name="importe"]').val(e.importe),n.find('select[name="tipo_persona"]').val(e.tipo_persona).change(),await l.change_atencion(),await l.change_tipo_persona(),n.find('select[name="id_tipo_persona"]').val(e.id_tipo_persona).change(),n.find('input[name="nombre_persona"]').val(e.nombre_persona),await l.change_tipo_persona(),n.find('select[name="id_moneda"]').val(e.id_moneda).change(),await l.change_moneda(!1),n.find('input[name="tipo_cambio"]').val(e.tipo_cambio),n.find('select[name="id_tipo_persona"]').val(e.id_tipo_persona).change(),await l.select_cuenta_bancaria_persona(),n.find('select[name="id_cuenta_bancaria_persona"]').val(e.id_cuenta_bancaria_persona).change(),n.find('input[name="cuenta_bancaria_persona"]').val(e.cuenta_bancaria_persona),await l.select_cuenta_bancaria_empresa(),n.find('select[name="id_cuenta_bancaria_empresa"]').val(e.id_cuenta_bancaria_empresa).change(),n.find('textarea[name="observacion"]').html(e.observacion),n.find('select[name="id_local"]').val(e.id_local).change(),l.fl_auto_event=!0,l.id=e.id,l.action_submit="save",o.find('div[name="modal-save"]').modal("show")},delete:function(a){let n="delete",e=o.find('form[name="'+n+'"]');o.find('h4[name="'+n+'"]').text("Anular Caja"),HELPER.reset_form(e);let t=HELPER.get_attr_json(a);e.find('div[name="texto"]').text(t.serie+"-"+t.numero),this.id=t.id,this.action_submit=n,o.find('div[name="modal-'+n+'"]').modal("show")},submit:function(){let a=HELPER.ladda(i+' form[name="'+this.action_submit+'"] button[type="submit"]'),n=new FormData(document.querySelector(i+' form[name="'+this.action_submit+'"]'));null!=this.id&&n.append("id",this.id),n.append("tipo",l.tipo),axios({method:"post",url:BASE_API+"tesoreria/caja/"+this.action_submit,data:n}).then((function(n){l.table.ajax.reload(null,!1),o.find('div[name="modal-'+l.action_submit+'"]').modal("hide"),HELPER.notificacion(n.data.mensaje,"success"),"save"==l.action_submit&&t.Z.print(n.data.id_caja),a.stop()})).catch((n=>{a.stop()}))}};const s=l},376:(a,n,e)=>{e.d(n,{Z:()=>o});var t=e(178);const o={print:async a=>{await axios.get(BASE_API+"tesoreria/caja/print/"+a).then((function(a){let n=a.data,e='<div style="max-width:842px; margin:auto;">';0==n.fl_estado&&(e+='\n                \n                <style>\n                    #marca_agua_anulado {\n                        position: relative;\n                    }\n\n                    .rotar_texto\n                    {                \n                        position: absolute;\n                        margin-top:30%;\n                        top: 50%;\n                        left: 50%;\n                        transform: translate(-50%, -50%);\n                        font-size:60px;\n                        opacity: 0.5;\n                    }\n                </style>       \n\n                <div id="marca_agua_anulado">\n                    <span class="rotar_texto" style="color:#d5062a; font-weight:bold;">ANULADO</span>\n                </div>'),e+='\n \n             <table  style="width:100%;">\n                 <tr>\n                     <td style="width:65%;">\n                         <img src="'+BASE_FILES+"images/"+n.empresa.logo+'" style="max-height:70px;"/>\n                         <div style="font-weight:bold; text-align:left;"><strong>'+n.empresa.razon_social+"</strong></div>\n                         <div>"+n.empresa.direccion+"</div>\n                         <div>"+n.empresa.telefono+"</div>\n                         <div>"+n.empresa.email+'</div>\n                     </td>\n                     <td style="width:35%;">\n                         <div style="text-align:center; background-color:#eeeeee !important; border: 1px solid #bebdbd !important; border-radius:8px; padding:8px;">\n                             <div style="font-size:18px;" ><strong style="font-size:14px">RUC : '+n.empresa.numero_documento+'</strong></div>\n                             <div style="font-weight:bold; font-size:18px;">RECIBO DE CAJA</div>\n                             <div  style="font-weight:bold; font-size:18px;"><strong>'+n.caja+'</strong></div>\n                         </div>\n                     </td>\n                 </tr>\n                 <tr>\n                     <td colspan="2" vertical-align:top;">\n                         <div style="background-color:#fff !important; border: 1px solid #bebdbd !important; border-radius:8px; margin-top:10px; padding:5px; min-height:80px;">\n                             <table style="width:100%;">\n                                <tr>\n                                     <td style="width:150px;"><strong>FECHA EMISIÓN :</strong></td>\n                                     <td>'+HELPER.fecha(n.fecha)+'</td>\n                                 </tr>\n                                 <tr>\n                                     <td colspan="2"><strong>NOMBRE COMPLETO</strong></td>\n                                 </tr>\n                                 <tr>\n                                     <td colspan="2">'+n.nombre_persona+'</td>\n                                 </tr>\n                                 <tr>\n                                    <td colspan="2"><strong>DESCRIPCION</strong></td>\n                                </tr>\n                                <tr>\n                                    <td colspan="2">'+n.descripcion+'</td>\n                                </tr>\n\n                             </table>\n                         </div>                    \n                     </td>\n                 </tr>\n                 <tr>\n                     <td colspan="2">\n                         <table class="detalle" style="width:100%; margin-top:10px; border-collapse:collapse;">\n                             <thead>\n                                 <tr>\n                                     <th style="font-weight:bold;  background-color:#eeeeee; border: 1px solid #bebdbd !important; border-width:1px 0 1px 1px !important; text-align:center;">ATENCION</th>\n                                     <th style="font-weight:bold; background-color:#eeeeee; border: 1px solid #bebdbd !important; border-width:1px 0 1px 0 !important; text-align:left; min-width:250px !important;">MOTIVO</th>\n                                     <th style="font-weight:bold; width:130px; background-color:#eeeeee; border: 1px solid #bebdbd !important; border-width:1px 0 1px 0 !important; width:100px !important; text-align:right;">MODALIDAD.</th>\n                                     <th style="font-weight:bold;background-color:#eeeeee; border: 1px solid #bebdbd !important; border-width:1px 1px 1px 0 !important; text-align:right;">CUENTA BANCARIA</th>                                \n                                 </tr>\n                             </thead>                            \n                             <tbody><tr>\n                                         <td style="text-align:center;">'+n.atencion+"</td>\n                                         <td>"+n.motivo+'</td>\n                                         <td style="text-align:right;">'+n.modalidad+'</td>\n                                         <td style="text-align:right;">'+n.cuenta_bancaria_persona+'</td>\n                                     </tr>\n                            </tbody>\n                             <tfoot>\n                                 <tr>\n                                     <td colspan="2" name="informacion_adicional"></td>\n                                     <td colspan="2" valign="top">\n                                         <div style="border:none;  margin-top:5px;">\n                                             <table style="width:100%; border-collapse:collapse;">\n                                                 <tr>\n                                                     <td style="font-weight:bold; font-size:11px !important; border-collapse:collapse;" align="left">\n                                                         <div><strong>TOTAL:</strong></div>\n                                                     </td>\n                                                     <td  align="right" style="font-size:11px !important; border-collapse:collapse;">\n                                                         <div>'+n.simbolo_moneda+" "+n.importe+'</div>\n                                                     </td>\n                                                 </tr>\n                                             </table>\n                                         </div>\n                                     </td>\n                                 </tr>\n                                 <tr>\n                                     <td colspan="8" align="center" style="padding-bottom:10px;">\n                                         <strong>MONTO EN LETRAS: </strong> '+t.Z.convertir(n.importe,n.moneda)+'\n                                     </td>\n                                 </tr>\n                                 <tr>\n                                     <td colspan="8" align="center">'+n.observacion+"</td>\n                                 </tr>\n                             </tfoot>\n                         </table>\n                     </td>\n                 </tr>\n             </table>",HELPER.print(e)})).catch((a=>{console.log(a)}))}}}}]);