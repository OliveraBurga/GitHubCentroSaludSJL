"use strict";(self.webpackChunkpoliclinico=self.webpackChunkpoliclinico||[]).push([[856],{856:(a,n,t)=>{let e,i;t.r(n),t.d(n,{default:()=>o});let l={render:async a=>{$("#main").off(),a.innerHTML='\n\n        <div id="main">\n            \x3c!-- Content Header (Page header) --\x3e\n            <section class="content-header">\n                <div class="row">\n                    <div class="col-md-8 content-header" style="padding-top:5px;">\n                        <h1 style="margin:0; ">\n                            Tipos de Servicio\n                            <small>Configuración</small>\n                        </h1>\n                    </div>\n                    <div class="col-md-4" align="right">\n                        <button type="button" class="btn btn-sm btn-info" name="nuevo"><i class="fa fa-plus"></i> Nuevo</button>\n                    </div>\n                </div>\n                </section>\n\n                \x3c!-- Main content --\x3e\n                <section class="content">\n\n\n                \x3c!-- Default box --\x3e\n                <div class="box box-info">\n                    <div class="box-body">\n                    <div class="table-responsive">\n                        <table name="registros" class="table table-striped" style="width:100%;"></table>\n                    </div>\n                    </div>\n                </div>\n                \x3c!-- /.box --\x3e\n\n            </section>\n            \x3c!-- /.content --\x3e\n            \n            \x3c!-- MODAL SAVE --\x3e\n            <div class="modal inmodal fade" name="modal-save" data-backdrop="static"  role="dialog" aria-hidden="true">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>\n                            <h4 name="save" class="modal-title">Modal title</h4>\n                        </div>\n                        <form name="save">\n                            <div class="modal-body">\n                                <div class="row"> \n                                    <div class="col-md-6">\n                                        <div class="form-group">\n                                            <label>Tipo Servicio </label>\n                                            <select name="tipo" class="form-control form-control-sm"   >\n                                            <option value="ANALISIS CLINICO">ANALISIS CLINICO</option>\n                                            <option value="CONSULTA MEDICA">CONSULTA MEDICA</option>\n                                            </select>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-6"   >\n                                        <div class="form-group">\n                                            <label>Nombre </label>\n                                            <input type="text" name="nombre" class="form-control" autocomplete="off" placeholder="NORMAL">\n                                        </div>\n                                    </div>\n                                    <div class="col-md-6" name="analisis">\n                                        <div class="form-group">\n                                            <label>Costo</label>\n                                            <input type="number" name="costo" class="form-control" autocomplete="off"  >\n                                        </div>\n                                    </div>\n                                    <div class="col-md-6"  name="analisis">\n                                    <div class="form-group">\n                                        <label>Unidad de Medida <span class="text-red">(*)</span></label>\n                                        <select name="id_unidad_medida" data-select="UNIDAD_MEDIDA" class="form-control select2"></select>\n                                    </div>\n                                    </div>\n                                    <div class="col-md-12"  name="analisis">\n                                        <div class="form-group">\n                                            <label>Valor referencial</label>\n                                            <textarea name="valor_referencial" class="form-control"></textarea>\n                                        </div>\n                                    </div>\n                                   \n                                    <div class="col-md-12"  name="analisis">\n                                    <div class="form-group">\n                                        <label>Tipo Examen <span class="text-red">(*)</span></label>\n                                        <select name="tipo_examen" class="form-control select" autocomplete="off">\n                                            <option value="">seleccione...</option>\n                                            <option value="BIOQUIMICA">BIOQUIMICA</option>\n                                            <option value="HEMOGRAMA">HEMOGRAMA</option>\n                                            <option value="INMUNOSEROLOGÍA">INMUNOSEROLOGÍA</option>\n                                            <option value="INMUNOLOGÍA">INMUNOLOGÍA</option>\n                                            <option value="PARASITOLOGÍA">PARASITOLOGÍA</option>\n                                            <option value="EXAMEN DE ORINA">EXAMEN DE ORINA</option>\n                                            <option value="GRUPO EXAMEN">GRUPO EXAMEN</option>\n                                        </select>\n                                    </div>\n                                    </div>\n\n                                  \n\n                                    <div class="col-md-12" data-name="detalle"  name="analisis">\n                                        <div class="table-responsive">\n                                            <table class="table">\n                                                <thead>\n                                                    <tr>\n                                                        <th>EXAMEN</th>\n                                                        <th>UNIDAD MEDIDA</th>\n                                                        <th>VR</th>\n                                                        <th>DC</th>\n                                                        <th style="width:10px;"></th>\n                                                    </tr>\n                                                </thead>\n                                                <tbody name="detalle-tipo"></tbody>\n                                                <tfoot>\n                                                    <tr>\n                                                        <td><button type="button" name="agregar_tipo" class="btn btn-secondary"><i class="fa fa-plus"></i> Agregar</button></td>\n                                                    </tr>\n                                                </tfoot>\n                                            </table>\n                                        </div>\n                                    </div>\n\n                                    <div class="col-md-12" data-name="detalle_campo"  name="analisis">\n                                       \n\n                                        <div class="box box-widget widget-user-2">\n                                            <div class="widget-user-header bg-green">\n                                             \n                                            </div>\n                                            <div class="box-footer no-padding">\n                                                <ul class="nav nav-stacked">\n                                                    <li> \n                                                        <samp style="margin-left:20px ;font-size: 16px; font-weight: bold;">Marcar las casillar para ocultar</samp>   \n                                                    </li>\n\n                                                    <table style="margin-left:20px ;font-size: 16px; font-weight: bold;color: #000 !important;">\n                                                        <tbody name ="detalle_atencion" >\n                                                            <tr data-name="cualitativo">\n                                                                <td style="margin-top: 10px;">\n                                                                    <li><a href="javascript:"><label style="color: #181717 !important;"><input type="checkbox"  name="columna" /> cualitativo</label></a></li>\n                                                                </td>\n                                                            </tr>\n                                                            <tr data-name="cuantitativo">\n                                                                <td style="margin-top: 10px;">\n                                                                    <li><a href="javascript:"><label style="color: #181717 !important;"><input type="checkbox"  name="columna"/> cuantitativo</label></a></li>\n                                                                </td>\n                                                            </tr>\n\n                                                            <tr data-name="grupo">\n                                                                <td style="margin-top: 10px;">\n                                                                    <li><a href="javascript:"><label style="color: #181717 !important;"><input type="checkbox"  name="columna"/> grupo</label></a></li>\n                                                                </td>\n                                                            </tr>\n                                                        \n                                                            <tr data-name="rh">\n                                                                <td style="margin-top: 10px;">\n                                                                    <li><a href="javascript:"><label style="color: #181717 !important;"><input type="checkbox"  name="columna"/> RH </label></a></li>\n                                                                </td>\n                                                            </tr>\n                                                            <tr data-name="dengue_igg">\n                                                                <td style="margin-top: 10px;">\n                                                                    <li><a href="javascript:"><label style="color: #181717 !important;"><input type="checkbox"  name="columna"/> IgG </label></a></li>\n                                                                </td>\n                                                            </tr>\n                                                            <tr data-name="dengue_igm">\n                                                                <td  style="margin-top: 10px;">\n                                                                    <li><a href="javascript:"><label style="color: #181717 !important;"><input type="checkbox"  name="columna"/> Igm</label></a></li>\n                                                                </td>\n                                                            </tr>\n                                                            <tr data-name="dengue_ns1">\n                                                                <td style="margin-top: 10px;">\n                                                                    <li><a href="javascript:"><label style="color: #181717 !important;"><input type="checkbox"  name="columna"/> Ns1 </label></a></li>\n                                                                </td>\n                                                            </tr>\n                                                            <tr data-name="beta_cualitativo">\n                                                                <td style="margin-top: 10px;">\n                                                                    <li><a href="javascript:"><label style="color: #181717 !important;"><input type="checkbox"  name="columna"/> Beta Cualitativo</label></a></li>\n                                                                </td>\n                                                            </tr>\n\n                                                            <tr data-name="tifico_o">\n                                                                <td style="margin-top: 10px;">\n                                                                    <li><a href="javascript:"><label style="color: #181717 !important;"><input type="checkbox"  name="columna"/> Tifico O</label></a></li>\n                                                                </td>\n                                                            </tr>\n\n\n                                                            <tr data-name="tifico_h">\n                                                                <td style="margin-top: 10px;">\n                                                                    <li><a href="javascript:"><label style="color: #181717 !important;"><input type="checkbox"  name="columna"/> Tifico H</label></a></li>\n                                                                </td>\n                                                            </tr>\n                                                            <tr data-name="paratifico_a">\n                                                                <td style="margin-top: 10px;">\n                                                                    <li><a href="javascript:"><label style="color: #181717 !important;"><input type="checkbox"  name="columna"/> Paratifico A</label></a></li>\n                                                                </td>\n                                                            </tr>\n                                                            <tr data-name="paratifico_b">\n                                                                <td style="margin-top: 10px;">\n                                                                    <li><a href="javascript:"><label style="color: #181717 !important;"><input type="checkbox"  name="columna"/> Paratifico B</label></a></li>\n                                                                </td>\n                                                            </tr>\n                                                            <tr data-name="brucelas">\n                                                                <td style="margin-top: 10px;">\n                                                                    <li><a href="javascript:"><label style="color: #181717 !important;"><input type="checkbox"  name="columna"/> Brucelas</label></a></li>\n                                                                </td>\n                                                            </tr>\n                                                              \n                                                  \n\n                                                        </tbody>\n                                                    </table>\n                                                \n                                                    \n                                                    \n                                                </ul>\n                                            </div>\n                                        </div>\n                                    </div>\n\n\n\n                                    <div class="col-md-12" style="padding-top:30px;" >\n                                        <div class="form-group">\n                                            <label><input type="checkbox" name="fl_default" /> Selección automática</label>                                            \n                                        </div>\n                                    </div>\n\n                                  \n\n                                </div>                              \n                            </div>\n                            <div class="modal-footer" align="center" style="display:block">\n                                <button type="button" name="cerrar" class="btn btn-white pull-left" data-dismiss="modal">Cerrar</button>\n                                <button type="submit" name="submit" class="btn btn-primary">Guardar</button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n\n            \x3c!-- MODAL DELETE --\x3e\n            <div class="modal inmodal fade" name="modal-delete" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">\n                <div class="modal-dialog modal-sm">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>\n                            <h4 name="delete" class="modal-title">Modal title</h4>\n                        </div>\n                        <form name="delete">\n                            <div class="row">\n                                <div class="col-md-12" align="center">\n                                    <i class="fad fa-trash-alt fa-4x"></i><br/>\n                                </div>\n                                <div class="col-md-12"  align="center" style="padding-top:10px;">\n                                    <label><input type="checkbox" name="confirmacion" required/>\n                                        Confirmo realizar la eliminación</label>\n                                    <p style="color:red;">Esta acción no se podrá revertir</p>\n                                </div>\n                                <div class="col-md-12" name="texto" align="center">\n\n                                </div>\n                            </div>\n                            <div class="modal-footer" align="center" style="display:block" >\n                                <button type="button" name="cerrar" class="btn btn-white" data-dismiss="modal">Cerrar</button>\n                                <button type="submit" name="submit" class="btn btn-danger">Eliminar Ahora!</button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        \n\n        </div>            \n        ',await l.after_render()},after_render:async()=>{i="#main",e=$(i),e.find('form[name="save"]').validate({rules:{nombre:{required:!0}},messages:{nombre:"Nombre"},submitHandler:function(){l.submit()}}),e.find('form[name="delete"]').validate({submitHandler:function(){l.submit()}}),e.on("click",'button[name="nuevo"]',(function(a){a.stopImmediatePropagation(),l.new()})),e.on("click",'button[name="row-edit"]',(function(a){a.stopImmediatePropagation(),l.edit($(this))})),e.on("change",'select[name="tipo_examen"]',(function(a){a.stopImmediatePropagation(),l.change_detalle()})),e.on("change",'select[name="tipo"]',(function(a){a.stopImmediatePropagation(),l.change_tipo_consulta(this.value)})),e.find('button[name="agregar_tipo"]').click((function(a){a.stopImmediatePropagation(),l.agregar_tipo()})),e.on("click",'button[name="quitar-tipo"]',(function(a){a.stopImmediatePropagation(),l.quitar_tipo($(this))})),e.find('button[name="agregar_campo"]').click((function(a){a.stopImmediatePropagation(),l.agregar_campo()})),e.on("click",'button[name="quitar_campo"]',(function(a){a.stopImmediatePropagation(),l.quitar_campo($(this))})),e.on("click",'a[name="row-delete"]',(function(a){a.stopImmediatePropagation(),l.delete($(this))})),l.datatable(),l.select_unidad_medida(),HELPER.load_component()},id:null,action_submit:null,change_tipo_consulta:async a=>{"ANALISIS CLINICO"==a?(e.find('div[name="analisis"]').show("hide"),e.find('div[name="consulta"]').hide("hide")):(e.find('div[name="consulta"]').show("hide"),e.find('div[name="analisis"]').hide("hide"))},change_detalle:async()=>{let a=e.find('select[name="tipo_examen"]').val();"HEMOGRAMA"==a||"GRUPO EXAMEN"==a?(e.find('div[data-name="detalle"]').show("hide"),e.find('div[data-name="detalle_campo"]').hide("hide")):"INMUNOSEROLOGÍA"==a?(e.find('div[data-name="detalle_campo"]').show("hide"),e.find('div[data-name="detalle"]').hide("hide")):(e.find('div[data-name="detalle"]').hide("hide"),e.find('div[data-name="detalle_campo"]').hide("hide"))},select_unidad:async(a=null,n="")=>{let t=e.find('tr[data-codigo="'+a+'"] select[data-select="UNIDAD"]');t.append($("<option></option>").attr("value","").text("Seleccione...")),l.array_unidad_medida.forEach((a=>{t.append('<option value="'+a.id+'">'+a.text+"</option>")})),t.val(n),t.select2()},agregar_tipo:(a=null)=>{let n=Math.random().toString(36).substr(2);null==a&&(a={id_unidad:"",examen:"",valor_referencial:"",id:"",fl_ecelular:0});let t='\n            <tr data-codigo="'+n+'">\n               <td style="display:none"><input type="text" step="any" data-name="id" class="form-control" value="'+a.id+'"  /></td>\n                <td><input type="text" step="any" data-name="examen" class="form-control" value="'+a.examen+'"  /></td>\n                <td><select data-select="UNIDAD" data-name="id_unidad" class="form-control"></select> </td>\n                <td><textarea data-name="valor_referencial" style="width:300px;" class="form-control">'+a.valor_referencial+'</textarea></td>\n\n                <td>   \n                    <input type="checkbox" '+(1==a.fl_ecelular?"checked":"")+' data-name="fl_ecelular" />\n                </td>\n\n                <td> <button type="button" name="quitar-tipo" class="btn btn-danger"><i class="fa fa-times"></i></button>  </td>\n            </tr>\n        ';e.find('tbody[name="detalle-tipo"]').append(t),l.select_unidad(n,a.id_unidad)},quitar_tipo:a=>{var n=a.parents("tr")[0].dataset.codigo;$('tr[data-codigo="'+n+'"]').remove()},tipo_json:()=>{let a=[];return e.find('tbody[name="detalle-tipo"] tr').each((function(){let n={id:$(this).find('input[data-name="id"]').val(),examen:$(this).find('input[data-name="examen"]').val(),id_unidad:$(this).find('select[data-name="id_unidad"]').val(),valor_referencial:$(this).find('textarea[data-name="valor_referencial"]').val(),fl_ecelular:$(this).find('input[data-name="fl_ecelular"]').is(":checked")?1:0};a.push(n)})),a},select_unidad_medida:async()=>{let a=e.find('select[data-select="UNIDAD_MEDIDA"]');a.append($("<option></option>").attr("value","").text("Seleccione...")),await axios.get(BASE_API+"configuracion/unidad_medida/get_select").then((function(n){l.array_unidad_medida=n.data,n.data.forEach((n=>{a.append('<option value="'+n.id+'">'+n.text+"</option>")})),a.select2()})).catch((a=>{console.log(a)}))},datatable:function(){this.table=e.find('table[name="registros"]').DataTable({ajax:BASE_API+"configuracion/tipo_servicio",columns:[{title:"ACCIÓN",defaultContent:"",render:function(a,n,t){return'\n                            <div class="btn-group">\n                                <button type="button" class="btn btn-default btn-sm" name="row-edit">EDITAR</button>     \n                                <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown">\n                                      <i class="fa fa-angle-down"></i>\n                                </button>\n                                <ul class="dropdown-menu dropdown-menu-left" role="menu">\n                                    <li><a class="dropdown-item" name="row-delete" href="javascript:"><i class="far fa-trash-alt"></i> Eliminar</a></li>\n                                </ul>\n                            </div>\n                        '},width:"100px"},{title:"TIPO SERVICIO",mData:"tipo"},{title:"NOMBRE",mData:"nombre"},{title:"UNIDAD MEDIDA",mData:"unidad_medida"},{title:"VALOR REFERENCIA",mData:"valor_referencial"},{title:"TIPO EXAMEN",mData:"tipo_examen"},{title:"COSTO",mData:"costo"}]})},new:function(){let a=e.find('form[name="save"]');e.find('h4[name="save"]').text("Nuevo Tipo de Servicio"),HELPER.reset_form(a),e.find('tbody[name="detalle-tipo"]').html(""),this.id=null,this.action_submit="save",l.change_detalle(),e.find('tbody[name="detalle-cuenta_bancaria"').html(""),e.find('div[name="modal-save"]').modal("show")},edit:function(a){let n=e.find('form[name="save"]');e.find('h4[name="save"]').text("Editar Tipo de Servicio"),HELPER.reset_form(n),e.find('tbody[name="detalle-tipo"]').html("");let t=HELPER.get_attr_json(a);n.find('input[name="nombre"]').val(t.nombre),n.find('input[name="costo"]').val(t.costo),n.find('select[name="tipo"]').val(t.tipo).change(),n.find('select[name="tipo_examen"]').val(t.tipo_examen).change(),n.find('textarea[name="valor_referencial"]').html(t.valor_referencial),n.find('input[name="fl_default"]').prop("checked",parseInt(t.fl_default)),n.find('select[name="id_unidad_medida"]').val(t.id_unidad_medida).change(),l.change_tipo_consulta(t.tipo),t.detalle.forEach((a=>{l.agregar_tipo(a)}));let i=e.find('tbody[name="detalle_atencion"]');t.columnas.forEach((a=>{i.find('tr[data-name="'+a.nombre+'"]').find('input[name="columna"]').prop("checked",!0),console.log(a)})),l.change_detalle(),this.id=t.id,this.action_submit="save",e.find('div[name="modal-save"]').modal("show")},delete:function(a){let n="delete",t=e.find('form[name="'+n+'"]');e.find('h4[name="'+n+'"]').text("Eliminar Tipo de Servicio"),HELPER.reset_form(t);let i=HELPER.get_attr_json(a);t.find('div[name="texto"]').text(i.email),this.id=i.id,this.action_submit=n,e.find('div[name="modal-'+n+'"]').modal("show")},submit:function(){let a=HELPER.ladda(i+' form[name="'+this.action_submit+'"] button[type="submit"]'),n=new FormData(document.querySelector(i+' form[name="'+this.action_submit+'"]'));n.append("detalle_tipo",JSON.stringify(l.tipo_json())),null!=this.id&&n.append("id",this.id);let t=[],o=0;e.find('tbody[name="detalle_atencion"] tr').each((function(){var a=!1;$(this).find('input[name="columna"]').is(":checked")&&(a=!0),!0===a&&(t[o]={nombre:$(this).attr("data-name"),fl_estado:1},o++)})),n.append("columnas",JSON.stringify(t)),axios({method:"post",url:BASE_API+"configuracion/tipo_servicio/"+this.action_submit,data:n}).then((function(n){l.table.ajax.reload(null,!1),e.find('div[name="modal-'+l.action_submit+'"]').modal("hide"),HELPER.notificacion(n.data.mensaje,"success"),a.stop()})).catch((n=>{a.stop()}))}};const o=l}}]);