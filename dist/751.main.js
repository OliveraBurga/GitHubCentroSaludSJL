"use strict";(self.webpackChunkpoliclinico=self.webpackChunkpoliclinico||[]).push([[751],{751:(t,e,n)=>{let a,c;n.r(e),n.d(e,{default:()=>i});let d={render:t=>{$("#main").off(),t.innerHTML='\n\n        <style>\n            .tabla_permiso td{\n                padding:0 !important;\n            }\n        </style>\n\n        <div id="main">\n            \x3c!-- Content Header (Page header) --\x3e\n            <section class="content-header">\n                <div class="row">\n                    <div class="col-md-8 content-header" style="padding-top:5px;">\n                        <h1 style="margin:0; ">\n                            Roles & Permisos\n                            <small>Configuración</small>\n                        </h1>\n                    </div>\n                    <div class="col-md-4" align="right">\n                        <button type="button" class="btn btn-sm btn-warning" name="nuevo"><i class="fa fa-plus"></i> Nuevo</button>\n                    </div>\n                </div>\n                </section>\n\n                \x3c!-- Main content --\x3e\n                <section class="content">\n\n                \x3c!-- Default box --\x3e\n                <div class="box box-warning">\n                    <div class="box-body">\n                    <div class="table-responsive">\n                        <table name="registros" class="table table-striped" style="width:100%;"></table>\n                    </div>\n                    </div>\n                </div>\n                \x3c!-- /.box --\x3e\n\n            </section>\n            \x3c!-- /.content --\x3e\n\n            \x3c!-- MODAL SAVE --\x3e\n            <div class="modal inmodal fade" name="modal-save" data-backdrop="static"  role="dialog" aria-hidden="true">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>\n                            <h4 name="save" class="modal-title">Modal title</h4>\n                        </div>\n                        <form name="save">\n                            <div class="modal-body" style="max-height:'+(window.innerHeight-200)+'px; overflow:auto;">\n                                <div class="row">\n                                    <div class="col-md-8">\n                                        <div class="form-group">\n                                            <label>Nombre</label>\n                                            <input type="text" name="nombre" class="form-control form-control-sm" autocomplete="off" required>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-4" style="padding-top:20px;">\n                                        <div class="form-group">\n                                            <label><input type="checkbox" name="fl_no_dashboard" autocomplete="off"> Ocultar Dashboard</label>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-12">\n                                        <table class="table tabla_permiso">\n                                            <thead>\n                                                <tr>\n                                                    <th>SECCIONES</th>\n                                                    <th class="text-center" style="width:80px;">VER</th>\n                                                    <th class="text-center" style="width:80px;">CREAR</th>\n                                                    <th class="text-center" style="width:80px;">EDITAR</th>\n                                                    <th class="text-center" style="width:80px;">ELIMINAR</th>\n                                                </tr>\n                                            </thead>\n                                            <tbody name="tabla-permiso">\n                                                <tr>\n                                                    <td class="font-weight-bold"></td>\n                                                    <td class="text-center"><input type="checkbox" name="check_all" value="view"></td>\n                                                    <td class="text-center"><input type="checkbox" name="check_all" value="new"></td>\n                                                    <td class="text-center"><input type="checkbox" name="check_all" value="edit"></td>\n                                                    <td class="text-center"><input type="checkbox" name="check_all" value="delete"></td>\n                                                </tr>\n                                           \n                                             \n                                                <tr>\n                                                    <td class="font-weight-bold" colspan="5" style="background-color:#BFE4FA; text-align:left;"><strong> CONFIGURACIÓN </strong></td>\n                                                </tr>\n                                                <tr data-menu="configuracion-ajuste_avanzado">\n                                                    <td>Ajustes Avanzados</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"></td>\n                                                    <td class="text-center"><input type="checkbox" name="edit"></td>\n                                                    <td class="text-center"></td>\n                                                </tr>\n                                                <tr data-menu="configuracion-usuario">\n                                                    <td>Usuarios</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"><input type="checkbox" name="new"></td>\n                                                    <td class="text-center"><input type="checkbox" name="edit"></td>\n                                                    <td class="text-center"><input type="checkbox" name="delete"></td>\n                                                </tr>\n                                                <tr data-menu="configuracion-rol">\n                                                    <td>Roles y Permisos</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"><input type="checkbox" name="new"></td>\n                                                    <td class="text-center"><input type="checkbox" name="edit"></td>\n                                                    <td class="text-center"><input type="checkbox" name="delete"></td>\n                                                </tr>\n                                                <tr data-menu="configuracion-empresa">\n                                                    <td>Empresa</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"></td>\n                                                    <td class="text-center"><input type="checkbox" name="edit"></td>\n                                                    <td class="text-center"></td>\n                                                </tr>\n                                                <tr data-menu="configuracion-local">\n                                                    <td>Locales Anexos</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"><input type="checkbox" name="new"></td>\n                                                    <td class="text-center"><input type="checkbox" name="edit"></td>\n                                                    <td class="text-center"><input type="checkbox" name="delete"></td>\n                                                </tr>\n                                                <tr data-menu="configuracion-lugar">\n                                                    <td>Lugares (Origen - Destino)</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"><input type="checkbox" name="new"></td>\n                                                    <td class="text-center"><input type="checkbox" name="edit"></td>\n                                                    <td class="text-center"><input type="checkbox" name="delete"></td>\n                                                </tr>\n                                              \n                                                <tr data-menu="configuracion-tarifa">\n                                                    <td>Tarifas</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"><input type="checkbox" name="new"></td>\n                                                    <td class="text-center"><input type="checkbox" name="edit"></td>\n                                                    <td class="text-center"><input type="checkbox" name="delete"></td>\n                                                </tr> \n                                                <tr data-menu="configuracion-cuenta_bancaria_empresa">\n                                                    <td>Cuentas bancarias</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"><input type="checkbox" name="new"></td>\n                                                    <td class="text-center"><input type="checkbox" name="edit"></td>\n                                                    <td class="text-center"><input type="checkbox" name="delete"></td>\n                                                </tr>\n                                                <tr data-menu="configuracion-personal">\n                                                    <td>Personales</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"><input type="checkbox" name="new"></td>\n                                                    <td class="text-center"><input type="checkbox" name="edit"></td>\n                                                    <td class="text-center"><input type="checkbox" name="delete"></td>\n                                                </tr>\n                                                <tr data-menu="configuracion-socio">\n                                                    <td>Paciente</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"><input type="checkbox" name="new"></td>\n                                                    <td class="text-center"><input type="checkbox" name="edit"></td>\n                                                    <td class="text-center"><input type="checkbox" name="delete"></td>\n                                                </tr>  \n                                                <tr data-menu="configuracion-diagnostico">\n                                                    <td>Diagnóstico</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"><input type="checkbox" name="new"></td>\n                                                    <td class="text-center"><input type="checkbox" name="edit"></td>\n                                                    <td class="text-center"><input type="checkbox" name="delete"></td>\n                                                </tr>  \n                                                <tr data-menu="configuracion-diagnostico_config">\n                                                    <td>Diagnóstico config</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"><input type="checkbox" name="new"></td>\n                                                    <td class="text-center"><input type="checkbox" name="edit"></td>\n                                                    <td class="text-center"><input type="checkbox" name="delete"></td>\n                                                </tr> \n\n                                                <tr data-menu="configuracion-tipo_servicio">\n                                                    <td>Servicio</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"><input type="checkbox" name="new"></td>\n                                                    <td class="text-center"><input type="checkbox" name="edit"></td>\n                                                    <td class="text-center"><input type="checkbox" name="delete"></td>\n                                                </tr>          \n                                                <tr data-menu="configuracion-tipo_documento">\n                                                    <td>Tipo Documento</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"><input type="checkbox" name="new"></td>\n                                                    <td class="text-center"><input type="checkbox" name="edit"></td>\n                                                    <td class="text-center"><input type="checkbox" name="delete"></td>\n                                                </tr> \n                                                <tr data-menu="configuracion-forma_pago">\n                                                    <td>Forma pago</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"><input type="checkbox" name="new"></td>\n                                                    <td class="text-center"><input type="checkbox" name="edit"></td>\n                                                    <td class="text-center"><input type="checkbox" name="delete"></td>\n                                                </tr>\n                                                <tr data-menu="configuracion-unidad_medida">\n                                                    <td>Unidad Medida</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"><input type="checkbox" name="new"></td>\n                                                    <td class="text-center"><input type="checkbox" name="edit"></td>\n                                                    <td class="text-center"><input type="checkbox" name="delete"></td>\n                                                </tr>\n                                                <tr>\n                                                    <td class="font-weight-bold" colspan="5" style="background-color:#BFE4FA; text-align:left;"><strong> DOCUMENTOS </strong></td>\n                                                </tr>\n                                                <tr data-menu="documento-documento_personal">\n                                                    <td>Documentos de Personal</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"><input type="checkbox" name="new"></td>\n                                                    <td class="text-center"><input type="checkbox" name="edit"></td>\n                                                    <td class="text-center"><input type="checkbox" name="delete"></td>\n                                                </tr>\n                                                <tr>\n                                                    <td class="font-weight-bold" colspan="5" style="background-color:#BFE4FA; text-align:left;"><strong> OPERACION </strong></td>\n                                                </tr>\n                                                <tr data-menu="operacion-atencion">\n                                                    <td>Atencion</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"><input type="checkbox" name="new"></td>\n                                                    <td class="text-center"><input type="checkbox" name="edit"></td>\n                                                    <td class="text-center"><input type="checkbox" name="delete"></td>\n                                                </tr> \n                                                <tr data-menu="operacion-triaje">\n                                                    <td>Triaje</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"><input type="checkbox" name="new"></td>\n                                                    <td class="text-center"><input type="checkbox" name="edit"></td>\n                                                    <td class="text-center"><input type="checkbox" name="delete"></td>\n                                                </tr> \n                                                <tr data-menu="operacion-plan_atencion">\n                                                    <td>Historia Clinica</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"><input type="checkbox" name="new"></td>\n                                                    <td class="text-center"><input type="checkbox" name="edit"></td>\n                                                    <td class="text-center"><input type="checkbox" name="delete"></td>\n                                                </tr> \n                                                <tr data-menu="operacion-analisis">\n                                                    <td>Analisis Clinico</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"><input type="checkbox" name="new"></td>\n                                                    <td class="text-center"><input type="checkbox" name="edit"></td>\n                                                    <td class="text-center"><input type="checkbox" name="delete"></td>\n                                                </tr> \n                                                <tr>\n                                                    <td class="font-weight-bold" colspan="5" style="background-color:#BFE4FA; text-align:left;"><strong> TESORERIA </strong></td>\n                                                </tr>\n\n                                                <tr data-menu="tesoreria-pago_atencion">\n                                                    <td>Pago Atencion</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"><input type="checkbox" name="new"></td>\n                                                    <td class="text-center"><input type="checkbox" name="edit"></td>\n                                                    <td class="text-center"><input type="checkbox" name="delete"></td>\n                                                </tr> \n\n                                                <tr data-menu="tesoreria-caja_chica">\n                                                    <td>Caja chica</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"><input type="checkbox" name="new"></td>\n                                                    <td class="text-center"><input type="checkbox" name="edit"></td>\n                                                    <td class="text-center"><input type="checkbox" name="delete"></td>\n                                                </tr>\n                                                <tr data-menu="tesoreria-caja">\n                                                    <td>Caja</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"><input type="checkbox" name="new"></td>\n                                                    <td class="text-center"><input type="checkbox" name="edit"></td>\n                                                    <td class="text-center"><input type="checkbox" name="delete"></td>\n                                                </tr>\n                                                <tr data-menu="tesoreria-caja_rapida">\n                                                    <td>Caja Rápida</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"><input type="checkbox" name="new"></td>\n                                                    <td class="text-center"><input type="checkbox" name="edit"></td>\n                                                    <td class="text-center"><input type="checkbox" name="delete"></td>\n                                                </tr>\n                                                <tr data-menu="tesoreria-autorizacion_gasto">\n                                                    <td>Autorización de Gastos</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"></td>\n                                                    <td class="text-center"><input type="checkbox" name="edit"></td>\n                                                    <td class="text-center"><input type="checkbox" name="delete"></td>\n                                                </tr>\n\n\n                                                <tr>\n                                                    <td style="padding-left:15px !important;"><strong>REPORTES</strong></td>\n                                                    <td class="text-center"></td>\n                                                    <td class="text-center"></td>\n                                                    <td class="text-center"></td>\n                                                    <td class="text-center"></td>\n                                                </tr>\n                                                <tr data-menu="tesoreria-reporte-caja_chica">\n                                                    <td style="padding-left:15px !important;">Caja chica</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"></td>\n                                                    <td class="text-center"></td>\n                                                    <td class="text-center"></td>\n                                                </tr>\n                                                <tr data-menu="tesoreria-reporte-flujo_caja">\n                                                    <td style="padding-left:15px !important;">Flujo de Caja</td>\n                                                    <td class="text-center"><input type="checkbox" name="view"></td>\n                                                    <td class="text-center"></td>\n                                                    <td class="text-center"></td>\n                                                    <td class="text-center"></td>\n                                                </tr>\n                                            </tbody>\n                                        </table>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="modal-footer" align="center" style="display:block">\n                                <button type="button" name="cerrar" class="btn btn-white pull-left" data-dismiss="modal">Cerrar</button>\n                                <button type="submit" class="btn btn-primary">Guardar</button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n\n            \x3c!-- MODAL DELETE --\x3e\n            <div class="modal inmodal fade" name="modal-delete" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">\n                <div class="modal-dialog modal-sm">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>\n                            <h4 name="delete" class="modal-title">Modal title</h4>\n                        </div>\n                        <form name="delete">\n                            <div class="row">\n                                <div class="col-md-12" align="center">\n                                    <i class="fad fa-trash-alt fa-4x"></i><br/>\n                                </div>\n                                <div class="col-md-12"  align="center" style="padding-top:10px;">\n                                    <label><input type="checkbox" name="confirmacion" required/>\n                                        Confirmo realizar la eliminación</label>\n                                    <p style="color:red;">Esta acción no se podrá revertir</p>\n                                </div>\n                                <div class="col-md-12" name="texto" align="center">\n\n                                </div>\n                            </div>\n                            <div class="modal-footer" align="center" style="display:block" >\n                                <button type="button" name="cerrar" class="btn btn-white" data-dismiss="modal">Cerrar</button>\n                                <button type="submit" name="submit" class="btn btn-danger">Eliminar Ahora!</button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n\n\n\n\n        </div>            \n        ',d.after_render()},after_render:()=>{c="#main",a=$(c),a.find('form[name="save"]').validate({submitHandler:function(){d.submit()}}),a.find('form[name="delete"]').validate({submitHandler:function(){d.submit()}}),a.on("click",'button[name="nuevo"]',(function(t){t.stopImmediatePropagation(),d.new()})),a.on("click",'button[name="row-edit"]',(function(t){t.stopImmediatePropagation(),d.edit($(this))})),a.on("click",'a[name="row-delete"]',(function(t){t.stopImmediatePropagation(),d.delete($(this))})),a.on("click",'input[name="check_all"]',(function(t){t.stopImmediatePropagation(),$(this).is(":checked")?a.find('input[name="'+this.value+'"]').prop("checked",!0):a.find('input[name="'+this.value+'"]').prop("checked",!1)})),d.datatable(),HELPER.load_component()},id:null,action_submit:null,imagen_anterior:null,select_all_permiso:function(t){$(this.el+' div[name="modal-save"]').find('input[name="m_'+t+'"]').is(":checked")?flag_check=!0:flag_check=!1,$(this.el+' table[name="tabla-permiso"] tbody tr').each((function(){$(this).find('input[name="'+t+'"]').prop("checked",flag_check)}))},datatable:function(){this.table=a.find('table[name="registros"]').DataTable({ajax:BASE_API+"configuracion/rol",lengthChange:!1,paginate:!1,columns:[{title:"ACCIÓN",defaultContent:"",render:function(t,e,n){return'\n                            <div class="btn-group">\n                                <button type="button" class="btn btn-default btn-sm" name="row-edit">EDITAR</button>     \n                                <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown">\n                                      <i class="fa fa-angle-down"></i>\n                                </button>\n                                <ul class="dropdown-menu dropdown-menu-left" role="menu">\n                                    <li><a class="dropdown-item" name="row-delete" href="javascript:"><i class="far fa-trash-alt"></i> Eliminar</a></li>\n                                </ul>\n                            </div>\n                        '},width:"100px"},{title:"NOMBRE",mData:"nombre"}],createdRow:function(t,e,n){$(t).attr("data-json",JSON.stringify(e)),$(t).find("td").eq(0).css("width","10px")}})},new:function(){let t=a.find('form[name="save"]');a.find('h4[name="save"]').text("Nuevo Rol"),HELPER.reset_form(t),t.find('img[name="imagen"]').attr("src",BASE_FILES+"images/sin_imagen.jpg"),this.id=null,this.action_submit="save",this.imagen_anterior=null,a.find('div[name="modal-save"]').modal("show")},edit:function(t){let e=a.find('form[name="save"]');a.find('h4[name="save"]').text("Modificar Rol"),HELPER.reset_form(e);let n=HELPER.get_attr_json(t);e.find('input[name="nombre"]').val(n.nombre),e.find('input[name="fl_no_dashboard"]').prop("checked",parseInt(n.fl_no_dashboard));let c=a.find('tbody[name="tabla-permiso"]');n.permisos.forEach((t=>{console.log(t);var e=c.find('tr[data-menu="'+t.menu+'"]');1==t.view&&e.find('input[name="view"]').prop("checked",!0),1==t.new&&e.find('input[name="new"]').prop("checked",!0),1==t.edit&&e.find('input[name="edit"]').prop("checked",!0),1==t.delete&&e.find('input[name="delete"]').prop("checked",!0)})),this.id=n.id,this.action_submit="save",a.find('div[name="modal-save"]').modal("show")},delete:function(t){let e="delete",n=a.find('form[name="'+e+'"]');a.find('h4[name="'+e+'"]').text("Eliminar Rol"),HELPER.reset_form(n);let c=HELPER.get_attr_json(t);n.find('div[name="texto"]').text(c.email),this.id=c.id,this.action_submit=e,a.find('div[name="modal-'+e+'"]').modal("show")},submit:function(){let t=HELPER.ladda(c+' form[name="'+this.action_submit+'"] button[type="submit"]'),e=new FormData(document.querySelector(c+' form[name="'+this.action_submit+'"]'));null!=this.id&&e.append("id",this.id);var n=[],i=0;if(a.find('tbody[name="tabla-permiso"] tr').each((function(){if(null!=$(this).attr("data-menu")){var t=!1;$(this).find('input[name="view"]').is(":checked")&&(t=!0);var e=!1;$(this).find('input[name="new"]').is(":checked")&&(e=!0);var a=!1;$(this).find('input[name="edit"]').is(":checked")&&(a=!0);var c=!1;$(this).find('input[name="delete"]').is(":checked")&&(c=!0),!0!==t&&!0!==e&&!0!==a&&!0!==c||(n[i]={menu:$(this).attr("data-menu"),view:t,new:e,edit:a,delete:c},i++)}})),n.length<=0&&"save"==this.action_submit)return HELPER.notificacion("No ha seleccionado ningún módulo","warning"),t.stop(),!1;e.append("permisos",JSON.stringify(n)),axios({method:"post",url:BASE_API+"configuracion/rol/"+this.action_submit,data:e}).then((function(e){d.table.ajax.reload(null,!1),a.find('div[name="modal-'+d.action_submit+'"]').modal("hide"),HELPER.notificacion(e.data.mensaje,"success"),t.stop()})).catch((e=>{t.stop()}))}};const i=d}}]);