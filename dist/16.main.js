"use strict";(self.webpackChunkpoliclinico=self.webpackChunkpoliclinico||[]).push([[16],{16:(n,e,a)=>{let o,i;a.r(e),a.d(e,{default:()=>l});let t={render:n=>{$("#main").off(),n.innerHTML='\n\n        <div id="main">\n            \x3c!-- Content Header (Page header) --\x3e\n            <section class="content-header">\n                <div class="row">\n                    <div class="col-md-8 content-header" style="padding-top:5px;">\n                        <h1 style="margin:0; ">\n                            Empresa\n                            <small>Configuración</small>\n                        </h1>\n                    </div>\n                </div>\n                </section>\n\n                \x3c!-- Main content --\x3e\n                <section class="content">\n\n                \x3c!-- Default box --\x3e\n                <div class="box box-info">\n                    <form name="save">\n                        <div class="box-body">                        \n                            <div class="row">\n                                <div class="col-md-3" align="center">\n                                    <div class="row">\n                                        <div class="col-md-12" align="center">\n                                            <div>\n                                                <img name="imagen" style="max-width:100%;" class="img_rectangle">\n                                            </div>\n                                            <div>\n                                                <label class="btn btn-default btn-sm" style="width:100%;">\n                                                    <i class="fa fa-search"></i> Examinar Logo \n                                                    <input type="file" name="imagen" style="display:none;">\n                                                </label>\n                                            </div>\n                                        </div>\n\n                                        <div class="col-md-12" align="center">\n                                            <div>\n                                                <img name="imagen_factura" style="max-width:100%;" class="img_rectangle">\n                                            </div>\n                                            <div>\n                                                <label class="btn btn-default btn-sm" style="width:100%;">\n                                                    <i class="fa fa-search"></i> Examinar logo para facturas\n                                                    <input type="file" name="imagen_factura" style="display:none;">\n                                                </label>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="col-md-9">\n                                    <div class="row">\n                                        <div class="col-md-4">\n                                            <label>Número RUC <span class="text-red">(*)</span></label>\n                                            <div class="input-group">\n                                                <input type="number" name="numero_documento" class="form-control" autocomplete="off">\n                                                <span class="input-group-btn">\n                                                <button type="button" name="buscar_numero" class="btn btn-primary" data-style="zoom-in">\n                                                    <i class="fa fa-search"></i>\n                                                </button>\n                                                </span>\n                                            </div>\n                                        </div>\n                                        <div class="col-md-8">\n                                            <div class="form-group">\n                                                <label>Razón Social</label>\n                                                <input type="text" name="razon_social" class="form-control form-control-sm" autocomplete="off" >\n                                            </div>\n                                        </div>\n                                        <div class="col-md-12">\n                                            <div class="form-group">\n                                                <label>Nombre Comercial</label>\n                                                <input type="text" name="nombre_comercial" class="form-control form-control-sm" autocomplete="off" >\n                                            </div>\n                                        </div>\n                                        <div class="col-md-12">\n                                            <div class="form-group">\n                                                <label>Dirección</label>\n                                                <input type="text" name="direccion" class="form-control form-control-sm" autocomplete="off" >\n                                            </div>\n                                        </div>\n                                        <div class="col-md-4">\n                                            <div class="form-group">\n                                                <label>Teléfono</label>\n                                                <input type="text" name="telefono" data-minus="true" class="form-control form-control-sm minus" autocomplete="off" >\n                                            </div>\n                                        </div>\n                                        <div class="col-md-4">\n                                            <div class="form-group">\n                                                <label>Correo electrónico</label>\n                                                <input type="email" name="email" data-minus="true" class="form-control form-control-sm minus" autocomplete="off" >\n                                            </div>\n                                        </div>   \n                                        <div class="col-md-4">\n                                            <div class="form-group">\n                                                <label>UBIGEO</label>\n                                                <select name="id_ubigeo" class="form-control form-control-sm" data-select="UBIGEO" ></select>\n                                            </div>\n                                        </div>          \n                                                             \n                                    </div>\n                                </div>\n                                <div class="col-md-12">\n                                    <hr>\n                                </div>\n                                <div class="col-md-12">\n                                    <h4> <strong>Proveedor de Servicios Electrónicos</strong></h4>\n                                </div>\n                                <div class="col-md-4">\n                                    <div class="form-group">\n                                        <label>Proveedor Electrónico</label>\n                                        <select name="tipo_proveedor_electronico" class="form-control form-control-sm select">\n                                            <option value="">Ninguno</option>\n                                            <option value="NUBEFACT">NUBEFACT</option>\n                                            <option value="FACTURALAYA">FACTURALAYA</option>\n                                        </select>\n                                    </div>\n                                </div>\n                                <div class="col-md-6">\n                                    <div class="form-group">\n                                        <label>Estado Facturación</span></label>\n                                        <select name="estado_facturacion" class="form-control select">\n                                            <option value="PRUEBA">PRUEBA</option>\n                                            <option value="PRODUCCION">PRODUCCIÓN</option>\n                                        </select>\n                                    </div>\n                                </div> \n                                <div class="col-md-12">\n                                    <div class="form-group">\n                                        <label>URL Proveedor Electrónico</label>\n                                        <input type="text" name="url_proveedor_electronico" data-mayus="false" class="form-control form-control-sm mayus_false" autocomplete="off" >\n                                    </div>\n                                </div>\n                                \n                            </div>\n                        </div>\n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-light-grey btn-sm" data-dismiss="modal" style="float:left;">Cancelar</button>\n                            <button type="button" name="submit" class="btn btn-primary btn-sm">Guardar</button>\n                        </div>\n                    </form>\n                </div>\n                \x3c!-- /.box --\x3e\n\n            </section>\n            \x3c!-- /.content --\x3e\n\n\n\n        </div>            \n        ',t.after_render()},after_render:()=>{i="#main",o=$(i),o.find('form[name="save"]').validate({rules:{numero_documento:{required:!0},razon_social:{required:!0},nombre_comercial:{required:!0},direccion:{required:!0},telefono:{required:!0},email:{required:!0},id_ubigeo:{required:!0}},messages:{numero_documento:"Número de Documento",razon_social:"Razón Social",nombre_comercial:"Nombre Comercial",direccion:"Dirección",telefono:"Teléfono",email:"Correo Electrónico",id_ubigeo:"Ubigeo"}}),o.on("click",'form[name="save"] button[name="submit"]',(function(n){n.stopImmediatePropagation(),o.find('form[name="save"]').valid()&&t.submit()})),o.find('input[name="imagen"]').change((function(n){n.stopImmediatePropagation(),HELPER.preview_image(this,o.find('img[name="imagen"]'))})),o.find('input[name="imagen_factura"]').change((function(n){n.stopImmediatePropagation(),HELPER.preview_image(this,o.find('img[name="imagen_factura"]'))})),o.on("click",'button[name="buscar_numero"]',(function(n){n.stopImmediatePropagation(),t.buscar_numero()})),o.on("keyup",'input[name="numero_documento"]',(function(n){n.stopImmediatePropagation(),13==n.which&&t.buscar_numero()})),t.select_ubigeo(),t.get(),HELPER.load_component()},id:null,action_submit:null,imagen_anterior:null,select_ubigeo:async()=>{o.find('select[data-select="UBIGEO"]').select2({ajax:{url:BASE_API+"recursos/data_static/ubigeo",dataType:"json",delay:250,data:function(n){return{buscar:n.term}},processResults:function(n,e){return{results:n}},cache:!0},escapeMarkup:function(n){return n},placeholder:"Departamento - Provincia - Distrito",minimumInputLength:3,allowClear:!0,language:{inputTooShort:function(){return"Digite mínimo 3 caracteres"}}})},buscar_numero:function(){let n=o.find('form[name="save"]'),e=HELPER.ladda(i+' button[name="buscar_numero"]');axios.get(BASE_API+"recursos/busqueda/reniec_sunat?numero="+n.find('input[name="numero_documento"]').val()).then((function(a){n.find('input[name="razon_social"]').val(a.data.razon_social),n.find('input[name="direccion"]').val(a.data.direccion),n.find('select[name="id_ubigeo"]').val(a.data.ubigeo).change(),e.stop()})).catch((n=>{console.log(n),e.stop()}))},get:async function(){axios.get(BASE_API+"configuracion/empresa").then((function(n){let e=n.data,a=o.find('form[name="save"]');a.find('input[name="numero_documento"]').val(e.numero_documento),a.find('input[name="razon_social"]').val(e.razon_social),a.find('input[name="nombre_comercial"]').val(e.nombre_comercial),a.find('input[name="direccion"]').val(e.direccion),a.find('input[name="telefono"]').val(e.telefono),a.find('input[name="email"]').val(e.email),a.find('img[name="imagen"]').attr("src",BASE_FILES+"images/"+e.logo),a.find('img[name="imagen_factura"]').attr("src",BASE_FILES+"images/"+e.logo_factura),a.find('select[name="tipo_proveedor_electronico"]').val(e.tipo_proveedor_electronico).change(),a.find('select[name="estado_facturacion"]').val(e.estado_facturacion).change(),a.find('textarea[name="info_comprobante"]').html(e.info_comprobante),a.find('input[name="url_proveedor_electronico"]').val(e.url_proveedor_electronico),null!=e.id_ubigeo&&a.find('select[name="id_ubigeo"]').html("").append(new Option(e.ubigeo,e.id_ubigeo)),t.imagen_anterior=e.logo,t.imagen_factura_anterior=e.logo_factura,t.action_submit="save"})).catch((n=>{console.log(n)}))},submit:function(){let n=HELPER.ladda(i+' form[name="'+this.action_submit+'"] button[name="submit"]'),e=new FormData(document.querySelector(i+' form[name="'+this.action_submit+'"]'));null!=this.id&&e.append("id",this.id),null!=this.imagen_anterior&&e.append("imagen_anterior",this.imagen_anterior),null!=this.imagen_factura_anterior&&e.append("imagen_factura_anterior",this.imagen_factura_anterior),axios({method:"post",url:BASE_API+"configuracion/empresa/"+this.action_submit,data:e}).then((function(e){t.get(),o.find('div[name="modal-'+t.action_submit+'"]').modal("hide"),HELPER.notificacion(e.data.mensaje,"success"),n.stop()})).catch((e=>{n.stop()}))}};const l=t}}]);