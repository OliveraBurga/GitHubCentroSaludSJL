"use strict";(self.webpackChunkpoliclinico=self.webpackChunkpoliclinico||[]).push([[777],{777:(n,e,a)=>{let t,o;a.r(e),a.d(e,{default:()=>l});let i={modal:(n=!1)=>{let e="",a="modal-xl";return 1==n&&(e='style="display:none;"',a="modal-lg"),'\n            \x3c!-- MODAL SAVE --\x3e\n                <div class="modal inmodal fade" name="modal-save" data-backdrop="static"  role="dialog" aria-hidden="true">\n                    <div class="modal-dialog '+a+'">\n                        <div class="modal-content">\n                            <div class="modal-header">\n                                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>\n                                <h4 name="save" class="modal-title">Modal title</h4>\n                            </div>\n                            <form name="save">\n                                <div class="modal-body">\n                                    <div class="nav-tabs-custom">\n                                        <ul class="nav nav-tabs">\n                                            <li class="active"><a href="#tab_1" data-toggle="tab" aria-expanded="true">Datos Personales</a></li>\n                                        </ul>\n                                        <div class="tab-content">\n                                            <div class="tab-pane active" id="tab_1">\n                                                <div class="row">\n                                                    <div class="col-md-3">\n                                                        <div class="row">\n                                                            <div class="col-md-12" align="center">\n                                                                <div>\n                                                                    <img name="imagen" style="max-width:100%;" class="img_rectangle">\n                                                                </div>\n                                                                <div style="padding-top: 5px;">\n                                                                    <label class="btn btn-info btn-sm" style="width:85%;">\n                                                                        <i class="fa fa-search"></i> Examinar\n                                                                        <input type="file" name="imagen" style="display:none;">\n                                                                    </label>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                    <div class="col-md-9">\n                                                        <div class="row">\n                                                             \n                                                            <div class="col-md-4">\n                                                                <div class="form-group">\n                                                                    <label>Documento <span class="text-red">(*)</span></label>\n                                                                    <select data-select="DOCUMENTO_ENTIDAD" name="id_documento"class="form-control select"></select>\n                                                                </div>\n                                                            </div>\n                                                            <div class="col-md-4">\n                                                                <label style="font-weight: bold;">Número DOC. <span class="text-red">(*)</span></label> <label name="condicion"></label>\n                                                                <div class="input-group">\n                                                                    <input type="text" name="numero_documento" class="form-control" autocomplete="off">\n                                                                    <span class="input-group-btn">\n                                                                    <button type="button" name="buscar_numero" class="btn btn-info" data-style="zoom-in">\n                                                                        <i class="fa fa-search"></i>\n                                                                    </button>\n                                                                    </span>\n                                                                </div>\n                                                            </div>\n                                                            <div class="col-md-4">\n                                                                <div class="form-group">\n                                                                    <label>Historia Clínica <span class="text-red">(*)</span></label>\n                                                                    <input type="text" name="historia_clinica" class="form-control" autocomplete="off">\n                                                                </div>\n                                                            </div>\n                                                            <div class="col-md-6">\n                                                                <div class="form-group">\n                                                                    <label>Apellidos<span class="text-red">(*)</span></label>\n                                                                    <input type="text" name="apellido" class="form-control" autocomplete="off">\n                                                                </div>\n                                                            </div>\n                                                            <div class="col-md-6">\n                                                                <div class="form-group">\n                                                                    <label>Nombres <span class="text-red">(*)</span></label>\n                                                                    <input type="text" name="nombre" class="form-control" autocomplete="off">\n                                                                </div>\n                                                            </div>\n                                                            <div class="col-md-12">\n                                                                <div class="form-group">\n                                                                    <label>Razón Social <span class="text-red">(*)</span></label>\n                                                                    <input type="text" name="razon_social" class="form-control" autocomplete="off">\n                                                                </div>\n                                                            </div>\n                                                            <div class="col-md-4">\n                                                                <label style="font-weight: bold;">Género <span class="text-red">(*)</span></label>\n                                                                <div class="form-group">\n                                                                    <input type="radio" data-name="sexo_m" name="sexo">\n                                                                    <label>Masculino</label>\n\n                                                                    <label style="padding-left: 20px; padding-right: 20px;"></label>\n\n                                                                    <input type="radio" data-name="sexo_f" name="sexo">\n                                                                    <label>Femenino</label>\n                                                                </div>\n                                                            </div>\n                                                            <div class="col-md-4">\n                                                                <div class="form-group">\n                                                                    <label>Fecha de nacimiento <span class="text-red">(*)</span></label>\n                                                                    <input type="date" name="fecha_nacimiento" class="form-control" autocomplete="off">\n                                                                </div>\n                                                            </div>\n                                                            <div class="col-md-4">\n                                                                <div class="form-group">\n                                                                    <label>Edad <span class="text-red">(*)</span></label>\n                                                                    <input type="number" name="edad" class="form-control" autocomplete="off" readonly>\n                                                                </div>\n                                                            </div>\n                                                            <div class="col-md-8">\n                                                                <div class="form-group">\n                                                                    <label>Dirección <span class="text-red">(*)</span></label>\n                                                                    <input type="text" name="direccion" class="form-control" autocomplete="off">\n                                                                </div>\n                                                            </div>\n                                                            <div class="col-md-4">\n                                                                <div class="form-group">\n                                                                    <label>Teléfono </label>\n                                                                    <input type="text" name="telefono" class="form-control" autocomplete="off">\n                                                                </div>\n                                                            </div>\n                                                            <div class="col-md-6" '+e+'>\n                                                                <div class="form-group">\n                                                                    <label>Email <small>Separar por comas</small> </label>\n                                                                    <input type="text" name="email" class="form-control mayus_false" data-mayus="false" autocomplete="off">\n                                                                </div>\n                                                            </div>\n                                                            <div class="col-md-6" '+e+'>\n                                                                <div class="form-group">\n                                                                    <label>Persona / Encargado  </label>\n                                                                    <input type="text" name="persona_encargado" class="form-control" autocomplete="off">\n                                                                </div>\n                                                            </div> \n                                                            <div class="col-md-12">\n                                                                <div class="form-group">\n                                                                    <label>UBIGEO - (Departamento - Provincia - Distrito) </label>\n                                                                    <div class="form-group">\n                                                                    <select name="id_ubigeo" data-select="UBIGEO" class="form-control select2"></select>\n                                                                    </div>                              \n                                                                </div>\n                                                            </div>\n                                                                 \n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>             \n                                                           \n                                                                                  \n                                        </div>\n                                    </div>\n                                    \n                                </div>\n                                <div class="modal-footer" align="center" style="display:block">\n                                    <button type="button" name="cerrar" class="btn btn-white pull-left" data-dismiss="modal">Cerrar</button>\n                                    <button type="button" name="submit" class="btn btn-info">Guardar</button>\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n        '},render:async(n,e,a=!1)=>{i.tipo=e,i.parent_comp=a;let t="main_"+Math.random().toString(36).substr(2);$("#"+t).off(),0!=a?n.html('\n                <div id="'+t+'">'+i.modal(!0)+"</div> \n            "):n.innerHTML='\n\n                <div id="'+t+'">\n                    \x3c!-- Content Header (Page header) --\x3e\n                    <section class="content-header">\n                        <div class="row">\n                            <div class="col-md-8 content-header" style="padding-top:5px;">\n                                <h1 style="margin:0; ">\n                                    Paciente\n                                    <small>Configuración</small>\n                                </h1>\n                            </div>\n                            <div class="col-md-4" align="right">\n                                <button type="button" class="btn btn-sm btn-info" name="nuevo"><i class="fa fa-plus"></i> Nuevo</button>\n                            </div>\n                        </div>\n                        </section>\n\n                        \x3c!-- Main content --\x3e\n                        <section class="content">\n\n                        \x3c!-- Default box --\x3e\n                        <div class="box box-info">\n                            <div class="box-body">\n                            <div class="table-responsive">\n                                <table name="registros" class="table table-striped nowrap" style="width:100%;"></table>\n                            </div>\n                            </div>\n                        </div>\n                        \x3c!-- /.box --\x3e\n\n                    </section>\n                    \x3c!-- /.content --\x3e\n\n                    '+i.modal()+'\n\n                    \x3c!-- MODAL DELETE --\x3e\n                    <div class="modal inmodal fade" name="modal-delete" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">\n                        <div class="modal-dialog modal-sm">\n                            <div class="modal-content">\n                                <div class="modal-header">\n                                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>\n                                    <h4 name="delete" class="modal-title">Modal title</h4>\n                                </div>\n                                <form name="delete">\n                                    <div class="row">\n                                        <div class="col-md-12" align="center">\n                                            <i class="fad fa-trash-alt fa-4x"></i><br/>\n                                        </div>\n                                        <div class="col-md-12"  align="center" style="padding-top:10px;">\n                                            <label><input type="checkbox" name="confirmacion" required/>\n                                                Confirmo realizar la eliminación</label>\n                                            <p style="color:red;">Esta acción no se podrá revertir</p>\n                                        </div>\n                                        <div class="col-md-12" name="texto" align="center">\n\n                                        </div>\n                                    </div>\n                                    <div class="modal-footer" align="center" style="display:block" >\n                                        <button type="button" name="cerrar" class="btn btn-white" data-dismiss="modal">Cerrar</button>\n                                        <button type="submit" name="submit" class="btn btn-danger">Eliminar Ahora!</button>\n                                    </div>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                \n\n                </div>            \n                ',await i.after_render(t)},after_render:async n=>{o="#"+n,t=$(o),t.find('form[name="save"]').validate({rules:{id_documento:{required:!0},numero_documento:{required:!0},historia_clinica:{required:!0},apellido:{required:!0},nombre:{required:!0}},messages:{id_documento:"Documento",numero_documento:"Número de Documento",historia_clinica:"Historia clínica",apellido:"Apellidos",nombre:"Nombre"}}),t.on("click",'form[name="save"] button[name="submit"]',(function(n){n.stopImmediatePropagation(),t.find('form[name="save"]').valid()&&i.submit()})),0==i.parent_comp&&(t.find('form[name="delete"]').validate({submitHandler:function(){i.submit()}}),t.on("click",'button[name="nuevo"]',(function(n){n.stopImmediatePropagation(),i.new()})),t.on("click",'button[name="row-edit"]',(function(n){n.stopImmediatePropagation(),i.edit($(this))})),t.on("click",'a[name="row-delete"]',(function(n){n.stopImmediatePropagation(),i.delete($(this))}))),t.find('input[name="imagen"]').change((function(n){n.stopImmediatePropagation(),HELPER.preview_image(this,t.find('img[name="imagen"]'))})),t.on("change",'input[name="fecha_nacimiento"]',(function(n){n.stopImmediatePropagation(),i.calcular_edad()})),t.on("keyup",'input[name="fecha_nacimiento"]',(function(n){n.stopImmediatePropagation(),i.calcular_edad()})),t.on("change",'select[name="id_documento"]',(function(n){n.stopImmediatePropagation(),i.change_documento()})),t.on("click",'button[name="buscar_numero"]',(function(n){n.stopImmediatePropagation(),i.buscar_numero()})),t.on("keyup",'input[name="numero_documento"]',(function(n){n.stopImmediatePropagation(),13==n.which&&i.buscar_numero()})),i.datatable(),i.select_documento_entidad(),i.select_ubigeo(),HELPER.load_component()},id:null,action_submit:null,imagen_anterior:null,array_rutas:[],array_documento:[],change_documento:()=>{if(100==t.find('select[name="id_documento"]').val()){let n=Math.random().toString(36).substr(2);t.find('input[name="numero_documento"]').val("SD"+n)}else t.find('input[name="numero_documento"]').val("")},get_correlativo:async()=>{await axios.get(BASE_API+"configuracion/socio/get_correlativo").then((function(n){t.find('input[name="historia_clinica"]').val(n.data.numero)})).catch((n=>{console.log(n)}))},calcular_edad:async()=>{let n=t.find('input[name="fecha_nacimiento"]').val(),e=new Date,a=new Date(n),o=e.getFullYear()-a.getFullYear(),i=e.getMonth()-a.getMonth();console.log(a.getDate()),(i<0||0===i&&e.getDate()<a.getDate()+1)&&o--,t.find('input[name="edad"]').val(o)},buscar_numero:async function(){let n=t.find('form[name="save"]'),e=HELPER.ladda(o+' button[name="buscar_numero"]');await axios.get(BASE_API+"configuracion/socio/buscar?numero="+n.find('input[name="numero_documento"]').val()).then((async function(a){let o=!0;""!=a.data&&1!=confirm("El cliente  ya existe, ¿Desea buscar nuevamente los datos en SUNAT/RENIEC?")&&(o=!1,e.stop()),1==o&&await axios.get(BASE_API+"recursos/busqueda/reniec_sunat?numero="+n.find('input[name="numero_documento"]').val()).then((function(a){"RUC"==t.find('select[name="id_documento"] option:selected').text()&&(n.find('input[name="razon_social"]').val(a.data.razon_social),n.find('select[name="id_ubigeo"]').html("").append(new Option(a.data.ubigeo,a.data.ubigeo)),n.find('label[name="condicion"]').text(a.data.condicion),"HABIDO"==a.data.condicion?n.find('label[name="condicion"]').css("color","green"):n.find('label[name="condicion"]').css("color","red")),"DNI"==t.find('select[name="id_documento"] option:selected').text()&&(n.find('input[name="razon_social"]').val(a.data.nombre+" "+a.data.apellido),n.find('input[name="apellido"]').val(a.data.apellido),n.find('input[name="nombre"]').val(a.data.nombre),n.find('label[name="condicion"]').text("")),n.find('input[name="direccion"]').val(a.data.direccion),e.stop()})).catch((n=>{console.log(n),e.stop()}))})).catch((n=>{console.log(n),e.stop()}))},select_documento_entidad:async()=>{let n=t.find('select[data-select="DOCUMENTO_ENTIDAD"]');n.append($("<option></option>").attr("value","").text("Seleccione...")),await axios.get(BASE_API+"recursos/data_static/documento_entidad").then((function(e){i.array_documento=e.data,e.data.forEach((e=>{n.append('<option value="'+e.id+'">'+e.text+"</option>")}))})).catch((n=>{console.log(n)}))},select_ubigeo:async()=>{t.find('select[data-select="UBIGEO"]').select2({ajax:{url:BASE_API+"recursos/data_static/ubigeo",dataType:"json",delay:250,data:function(n){return{buscar:n.term}},processResults:function(n,e){return{results:n}},cache:!0},escapeMarkup:function(n){return n},placeholder:"Departamento - Provincia - Distrito",minimumInputLength:3,allowClear:!0,language:{inputTooShort:function(){return"Digite mínimo 3 caracteres"}}})},datatable:function(){this.table=t.find('table[name="registros"]').DataTable({ajax:{url:BASE_API+"configuracion/socio",data:function(n){"cliente"==i.tipo?n.fl_cliente=!0:"proveedor"==i.tipo&&(n.fl_proveedor=!0)}},columns:[{title:"ACCIÓN",defaultContent:"",render:function(n,e,a){return'\n                            <div class="btn-group" style="width:120px;">\n                                <button type="button" class="btn btn-default btn-sm" name="row-edit">EDITAR</button>     \n                                <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown">\n                                      <i class="fa fa-angle-down"></i>\n                                </button>\n                                <ul class="dropdown-menu dropdown-menu-left" role="menu">                                    \n                                    <li><a class="dropdown-item" name="row-delete" href="javascript:"><i class="far fa-trash-alt"></i> Eliminar</a></li>\n                                </ul>\n                            </div>\n                        '},width:"100px"},{title:"DOCUMENTO",render:function(n,e,a){return a.documento+" "+a.numero_documento}},{title:"PACIENTE",mData:"nombre_completo"},{title:"HISTORIA CLÍNICA",mData:"historia_clinica"},{title:"TELÉFONO",render:function(n,e,a){let t="";return null!=a.telefono&&(t='<a href="tel: +51'+a.telefono+'" class="text-green"><i class="fa fa-phone-alt"></i> '+a.telefono+"</a>"),t},class:"text-center"},{title:"FECHA DE NACIMIENTO",render:function(n,e,a){return null!=a.fecha_nacimiento?HELPER.fecha(a.fecha_nacimiento):""}},{title:"GÉNERO",render:function(n,e,a){let t="";return"MASCULINO"==a.sexo?t='<small class="label label-primary">MASCULINO</small>':"FEMENINO"==a.sexo&&(t='<small class="label label-warning">FEMENINO</small>'),t},class:"text-center"},{title:"DIRECCIÓN",mData:"direccion"},{title:"EMAIL",mData:"email"}]})},new:function(){let n=t.find('form[name="save"]');t.find('h4[name="save"]').text("Nuevo"),HELPER.reset_form(n),n.find('img[name="imagen"]').attr("src",BASE_FILES+"images/sin_imagen.jpg"),this.id=null,this.action_submit="save",this.imagen_anterior=null,i.get_correlativo(),t.find('tbody[name="detalle-cuenta_bancaria"').html(""),t.find('tbody[name="detalle-contacto"').html(""),t.find('tbody[name="detalle-direccion"').html(""),t.find('div[name="modal-save"]').modal("show")},edit:async function(n=null,e=null,a=null){let o=t.find('form[name="save"]');t.find('h4[name="save"]').text("Editar"),HELPER.reset_form(o);let l=null;null==a?l=null==e?HELPER.get_attr_json(n):e:await axios.get(BASE_API+"configuracion/socio/buscar?id_socio="+a).then((async function(n){l=n.data})).catch((n=>{console.log(n)})),o.find('select[name="id_documento"]').val(l.id_documento).change(),o.find('input[name="numero_documento"]').val(l.numero_documento),o.find('input[name="razon_social"]').val(l.razon_social),o.find('input[name="direccion"]').val(l.direccion),o.find('input[name="telefono"]').val(l.telefono),o.find('input[name="persona_encargado"]').val(l.persona_encargado),o.find('input[name="email"]').val(l.email),o.find('input[name="historia_clinica"]').val(l.historia_clinica),o.find('input[name="apellido"]').val(l.apellido),o.find('input[name="nombre"]').val(l.nombre),"MASCULINO"==l.sexo?o.find('input[data-name="sexo_m"]').prop("checked",!0):"FEMENINO"==l.sexo&&o.find('input[data-name="sexo_f"]').prop("checked",!0),o.find('input[name="fecha_nacimiento"]').val(l.fecha_nacimiento),o.find('img[name="imagen"]').attr("src",BASE_FILES+"images/"+l.imagen),null!=l.id_ubigeo&&o.find('select[name="id_ubigeo"]').html("").append(new Option(l.ubigeo,l.id_ubigeo)),await i.calcular_edad(),this.id=l.id,this.action_submit="save",this.imagen_anterior=l.imagen,t.find('div[name="modal-save"]').modal("show")},delete:function(n){let e="delete",a=t.find('form[name="'+e+'"]');t.find('h4[name="'+e+'"]').text("Eliminar"),HELPER.reset_form(a);let o=HELPER.get_attr_json(n);a.find('div[name="texto"]').text(o.nombre_completo),this.id=o.id,this.action_submit=e,t.find('div[name="modal-'+e+'"]').modal("show")},submit:function(){let n=HELPER.ladda(o+' form[name="'+this.action_submit+'"] button[name="submit"]'),e=new FormData(document.querySelector(o+' form[name="'+this.action_submit+'"]'));if(null!=this.id&&e.append("id",this.id),null!=this.imagen_anterior&&e.append("imagen_anterior",this.imagen_anterior),!t.find('input[data-name="sexo_f"]').is(":checked")&&!t.find('input[data-name="sexo_m"]').is(":checked"))return n.stop(),HELPER.notificacion("Seleccione un género por favor","warning");let a="";t.find('input[data-name="sexo_f"]').is(":checked")?a="FEMENINO":t.find('input[data-name="sexo_m"]').is(":checked")&&(a="MASCULINO"),e.append("sexo",a),axios({method:"post",url:BASE_API+"configuracion/socio/"+this.action_submit,data:e}).then((function(e){0==i.parent_comp?i.table.ajax.reload(null,!1):i.parent_comp(e.data.socio),t.find('div[name="modal-'+i.action_submit+'"]').modal("hide"),HELPER.notificacion(e.data.mensaje,"success"),n.stop()})).catch((e=>{n.stop()}))}};const l=i}}]);