"use strict";(self.webpackChunkpoliclinico=self.webpackChunkpoliclinico||[]).push([[797,373],{178:(a,n,t)=>{t.d(n,{Z:()=>i});let e={Unidades:function(a){switch(a){case 1:return"UN";case 2:return"DOS";case 3:return"TRES";case 4:return"CUATRO";case 5:return"CINCO";case 6:return"SEIS";case 7:return"SIETE";case 8:return"OCHO";case 9:return"NUEVE"}return""},Decenas:function(a){let n=Math.floor(a/10),t=a-10*n;switch(n){case 1:switch(t){case 0:return"DIEZ";case 1:return"ONCE";case 2:return"DOCE";case 3:return"TRECE";case 4:return"CATORCE";case 5:return"QUINCE";default:return"DIECI"+this.Unidades(t)}case 2:return 0===t?"VEINTE":"VEINTI"+this.Unidades(t);case 3:return this.DecenasY("TREINTA",t);case 4:return this.DecenasY("CUARENTA",t);case 5:return this.DecenasY("CINCUENTA",t);case 6:return this.DecenasY("SESENTA",t);case 7:return this.DecenasY("SETENTA",t);case 8:return this.DecenasY("OCHENTA",t);case 9:return this.DecenasY("NOVENTA",t);case 0:return this.Unidades(t)}},DecenasY:function(a,n){return n>0?a+" Y "+this.Unidades(n):a},Centenas:function(a){let n=Math.floor(a/100),t=a-100*n;switch(n){case 1:return t>0?"CIENTO "+this.Decenas(t):"CIEN";case 2:return"DOSCIENTOS "+this.Decenas(t);case 3:return"TRESCIENTOS "+this.Decenas(t);case 4:return"CUATROCIENTOS "+this.Decenas(t);case 5:return"QUINIENTOS "+this.Decenas(t);case 6:return"SEISCIENTOS "+this.Decenas(t);case 7:return"SETECIENTOS "+this.Decenas(t);case 8:return"OCHOCIENTOS "+this.Decenas(t);case 9:return"NOVECIENTOS "+this.Decenas(t)}return this.Decenas(t)},Seccion:function(a,n,t,e){let i=Math.floor(a/n),o=a-i*n,s="";return i>0&&(s=i>1?this.Centenas(i)+" "+e:t),o>0&&(s+=""),s},Miles:function(a){let n=1e3,t=a-Math.floor(a/n)*n,e=this.Seccion(a,n,"MIL","MIL"),i=this.Centenas(t);return""==e?i:e+" "+i},Millones:function(a){let n=1e6,t=a-Math.floor(a/n)*n,i=e.Seccion(a,n,"UN MILLON DE","MILLONES DE"),o=e.Miles(t);return""==i?o:i+" "+o},convertir:function(a,n="SOLES"){var t={numero:a,enteros:Math.floor(a),centavos:Math.round(100*a)-100*Math.floor(a),letrasCentavos:"",letrasMonedaPlural:n,letrasMonedaSingular:n,letrasMonedaCentavoPlural:"CÉNTIMOS",letrasMonedaCentavoSingular:"CÉNTIMOS"};return t.letrasCentavos="CON "+(t.centavos,("0"==t.centavos?"00":t.centavos)+"/100 "),0==t.enteros?"CERO "+t.letrasMonedaPlural:(t.enteros,this.Millones(t.enteros)+" "+t.letrasCentavos+t.letrasMonedaSingular)}};const i=e},797:(a,n,t)=>{t.r(n),t.d(n,{default:()=>d});var e=t(376),i=t(373);let o,s,l={render:async a=>{$("#main").off(),a.innerHTML='\n\n        <div id="main">\n            \x3c!-- Content Header (Page header) --\x3e\n            <section class="content-header">\n                <div class="row">\n                    <div class="col-md-8 content-header" style="padding-top:5px;">\n                        <h1 style="margin:0; ">\n                            Caja chica\n                            <small>Tesoreria</small>\n                        </h1>\n                    </div>\n                    <div class="col-md-4" data-contenedor="caja_chica_abierto" align="right">\n                        <button type="button" class="btn btn-sm btn-primary" name="nuevo"><i class="fa fa-plus"></i> Nuevo Movimiento</button>\n                        <button type="button" class="btn btn-sm btn-danger" name="cerrar_caja"><i class="fa fa-minus-circle"></i> Cerrar Caja</button>\n                    </div>\n                </div>\n            </section>\n\n            \x3c!-- Main content --\x3e\n            <section class="content">\n\n                <div data-contenedor="caja_chica_abierto" style="display:none;">\n                    <div class="row">        \n                        <div class="col-md-3">\n                            <div class="info-box bg-yellow">\n                                <span class="info-box-icon">\n                                    <i class="fa fa-flag"></i>\n                                </span>\n                    \n                                <div class="info-box-content">\n                                    <span class="info-box-text">INICIAL</span>\n                                    <span class="info-box-number contador_animate" name="saldo_inicial">0.00</span>\n                        \n                                    <div class="progress">\n                                        <div class="progress-bar" style="width: 50%"></div>\n                                    </div>\n                                    <span class="progress-description">\n                                            \n                                    </span>\n                                </div>\n                                \x3c!-- /.info-box-content --\x3e\n                            </div>\n                        </div>\n                        <div class="col-md-3">\n                            <div class="info-box bg-aqua">\n                                <span class="info-box-icon"><i class="fa fa-arrow-circle-up"></i></span>\n                    \n                                <div class="info-box-content">\n                                <span class="info-box-text">INGRESOS</span>\n                                <span class="info-box-number contador_animate" name="total_ingreso">0.00</span>\n                    \n                                <div class="progress">\n                                    <div class="progress-bar" style="width: 50%"></div>\n                                </div>\n                                <span class="progress-description">\n                                 \n                                </span>\n                                </div>\n                                \x3c!-- /.info-box-content --\x3e\n                            </div>\n                        </div>\n                        <div class="col-md-3">\n                            <div class="info-box bg-red">\n                                <span class="info-box-icon"><i class="fa fa-arrow-circle-down"></i></span>\n                    \n                                <div class="info-box-content">\n                                <span class="info-box-text">EGRESOS</span>\n                                <span class="info-box-number contador_animate" name="total_egreso">0</span>\n                    \n                                <div class="progress">\n                                    <div class="progress-bar" style="width: 50%"></div>\n                                </div>\n                                <span class="progress-description">\n                                        \n                                </span>\n                                </div>\n                                \x3c!-- /.info-box-content --\x3e\n                            </div>\n                        </div>\n                        <div class="col-md-3">\n                            <div class="info-box bg-green">\n                                <span class="info-box-icon"><i class="fa fa-coins"></i></span>\n                    \n                                <div class="info-box-content">\n                                <span class="info-box-text">SALDO</span>\n                                <span class="info-box-number contador_animate" name="total_saldo">0</span>\n                    \n                                <div class="progress">\n                                    <div class="progress-bar" style="width: 50%"></div>\n                                </div>\n                                <span class="progress-description">\n                                    \n                                </span>\n                                </div>\n                                \x3c!-- /.info-box-content --\x3e\n                            </div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Default box --\x3e\n                    <div class="box box-warning">\n                        <div class="box-body">\n                            <div class="table-responsive">\n                                <table name="registros" class="table table-striped nowrap" style="width:100%;"></table>\n                            </div>\n                        </div>\n                    </div>\n                    \x3c!-- /.box --\x3e\n                </div>\n\n                <div data-contenedor="caja_chica_cerrado" style="display:none;">\n                    \n                    <div style="width:320px; margin:auto;">\n                        \x3c!-- Default box --\x3e\n                        <div class="box box-primary">\n                            <div class="box-body">\n                                <form name="save_apertura">\n                                    <div class="row">\n                                        <div class="col-md-12">\n                                            <div class="form-group">\n                                                <label>Usuario de Sistema</label>\n                                                <div class="form-group">\n                                                    <input type="text" class="form-control" value="'+GLOBAL.usuario.nombre+" "+GLOBAL.usuario.apellido+'" readonly />\n                                                </div>                              \n                                            </div>\n                                        </div>\n                                        <div class="col-md-7">\n                                            <div class="form-group">\n                                                <label>Fecha <span class="text-red">(*)</span></label>\n                                                <div class="form-group">\n                                                    <input type="date" class="form-control" name="fecha" value="'+HELPER.fecha(null,"YYYY-MM-DD")+'" required />\n                                                </div>                              \n                                            </div>\n                                        </div>\n                                        <div class="col-md-5">\n                                            <div class="form-group">\n                                                <label>Hora <span class="text-red">(*)</span></label>\n                                                <div class="form-group">\n                                                <input type="time" class="form-control" name="hora" value="'+HELPER.fecha(null,"HH:mm")+'" required />\n                                                </div>                              \n                                            </div>\n                                        </div>\n                                        <div class="col-md-12">\n                                            <label>Importe Inicial <span class="text-red">(*)</span></label>\n                                            <div class="form-group">\n                                                <div class="input-group">\n                                                    <span class="input-group-addon">'+GLOBAL.moneda_sistema.simbolo+'</span>\n                                                    <input type="number" step="any" name="saldo_inicial" class="form-control" autocomplete="off" list="list-contacto_nombre">\n                                                </div>                                   \n                                            </div>   \n                                        </div>\n                                        <div class="col-md-12" align="center" style="padding:5px;">\n                                            <label><input type="checkbox" required/> Acepto aperturar caja</label>\n                                        </div>\n                                        <div class="col-md-12">\n                                            <button type="submit" class="btn btn-primary btn-lg" style="width:100%;"><i class="fa fa-plus-circle"></i>  APERTURAR CAJA</button>\n                                        </div>\n                                    </div>\n                                </form>                                \n                            </div>\n                        </div>\n                        \x3c!-- /.box --\x3e                           \n                    </div>\n\n                    \n                </div>\n\n            </section>\n            \x3c!-- /.content --\x3e\n\n            \x3c!-- MODAL SAVE --\x3e\n            <div class="modal inmodal fade" name="modal-save" data-backdrop="static"  role="dialog" aria-hidden="true">\n                <div class="modal-dialog modal-lg">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>\n                            <h4 name="save" class="modal-title">Modal title</h4>\n                        </div>\n                        <form name="save">\n                            <div class="modal-body">\n                                <div class="row">\n                                    <div class="col-md-4">\n                                        <div class="form-group">\n                                            <label>Tipo Movimiento<span class="text-red">(*)</span></label>\n                                            <select name="tipo_movimiento" class="form-control select">\n                                                <option value="">Seleccione...</option>\n                                                <option value="INGRESO">INGRESO</option>\n                                                <option value="EGRESO">EGRESO</option>\n                                            </select>                           \n                                        </div>\n                                    </div>\n                                    <div class="col-md-4">\n                                        <div class="form-group">\n                                            <label>Fecha <span class="text-red">(*)</span></label>\n                                            <div class="form-group">\n                                            <input type="date" class="form-control" name="fecha" />\n                                            </div>                              \n                                        </div>\n                                    </div>\n                                    <div class="col-md-4">\n                                        <div class="form-group">\n                                            <label>Atencion <small>()</small></label>\n                                            <div class="form-group">\n                                            <select name="id_atencion" data-select="VIAJE" class="form-control"></select>\n                                            </div>                              \n                                        </div>\n                                    </div>\n                                    <div class="col-md-4">\n                                        <div class="form-group">\n                                            <label>Motivo <span class="text-red">(*)</span></label>\n                                            <input type="text" name="motivo" class="form-control" list="list-motivo_caja" autocomplete="off" />\n                                            <datalist id="list-motivo_caja">\n                                                <option value="PAGO ATENCION" />\n                                                \n                                                <option value="OTROS" />\n                                            </datalist>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-8">\n                                        <div class="form-group">\n                                            <label>Descripción <span class="text-red">(*)</span></label>\n                                            <input type="text" class="form-control" name="descripcion" autocomplete="off" />                             \n                                        </div>\n                                    </div>\n                                    <div class="col-md-4">\n                                        <div class="form-group">\n                                            <label>Modalidad de Pago <span class="text-red">(*)</span></label>\n                                            <input type="text" name="modalidad" class="form-control" list="list-modalidad" />\n                                            <datalist id="list-modalidad">\n                                                <option value="">\n                                                <option value="TRANSFERENCIA" />\n                                                <option value="EFECTIVO" />\n                                                <option value="CHEQUE" />\n                                                <option value="DEPÓSITO" />   \n                                            </select>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-4">\n                                        <div class="form-group">\n                                            <label>Moneda <span class="text-red">(*)</span></label>\n                                            <select name="id_moneda" data-select="MONEDA" class="form-control select"></select>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-4">\n                                        <div class="form-group">\n                                            <label>Tipo Cambio <span class="text-red">(*)</span></label>\n                                            <input type="number" step="any" name="tipo_cambio" class="form-control" autocomplete="off">\n                                        </div>\n                                    </div>      \n                                    <div class="col-md-4">\n                                        <div class="form-group">\n                                            <label>Importe <span class="text-red">(*)</span></label>\n                                            <input type="text" name="importe" class="form-control" autocomplete="off">\n                                        </div>                         \n                                    </div> \n                                    <div class="col-md-4" data-contenedor="tipo_persona">\n                                        <div class="form-group">\n                                            <label>Tipo Persona <span class="text-red">(*)</span></label>\n                                            <select name="tipo_persona" class="form-control select">\n                                                <option value="">Seleccione...</option>\n                                                \n                                                <option value="ADMINISTRATIVO">ADMINISTRATIVO</option>\n                                                <option value="BIOLOGO">BIOLOGO</option>\n                                                <option value="ENFERMERA">ENFERMERA</option>\n                                                <option value="MEDICO">MEDICO</option>\n                                                <option value="MICROBIOLOGO">MICROBIOLOGO</option>\n                                                <option value="PSICOLOGO">PSICOLOGO</option>\n                                                <option value="TEC.ENFERMERA">TEC.ENFERMERA</option>\n                                                <option value="TECNOLOGO MEDICO">TECNOLOGO MEDICO</option>\n                                                <option value="OTRO">OTRO</option>\n                                            </select>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-4" data-campo="id_tipo_persona" data-contenedor="tipo_persona">\n                                        <div class="form-group">\n                                            <label>Persona <span class="text-red">(*)</span></label>\n                                            <select name="id_tipo_persona" data-select="ID_TIPO_PERSONA" class="form-control"></select>                          \n                                        </div>\n                                    </div>\n                                    <div class="col-md-4" data-campo="nombre_persona" data-contenedor="tipo_persona">\n                                        <div class="form-group">\n                                            <label>Nombre completo de persona <span class="text-red">(*)</span></label>\n                                            <input type="text" name="nombre_persona" class="form-control" autocomplete="off">                 \n                                        </div>\n                                    </div>\n                                    <div class="col-md-6" data-campo="id_cuenta_bancaria_persona" data-contenedor="tipo_persona">\n                                        <div class="form-group">\n                                            <label>Cuenta Bancaria de Persona <span class="text-red">(*)</span></label>\n                                            <select name="id_cuenta_bancaria_persona" data-select="ID_CUENTA_BANCARIA_PERSONA" class="form-control"></select>                          \n                                        </div>\n                                    </div>\n                                    <div class="col-md-6" data-campo="cuenta_bancaria_persona" data-contenedor="tipo_persona">\n                                        <div class="form-group">\n                                            <label>Cuenta Bancaria de Persona <span class="text-red">(*)</span></label>\n                                            <input type="text" name="cuenta_bancaria_persona" class="form-control" autocomplete="off">                 \n                                        </div>\n                                    </div>\n                                    <div class="col-md-6" data-contenedor="tipo_persona">\n                                        <div class="form-group">\n                                            <label>Cuenta Bancaria de Empresa</label>\n                                            <select name="id_cuenta_bancaria_empresa" data-select="CUENTA_BANCARIA_EMPRESA" class="form-control"></select>                          \n                                        </div>\n                                    </div>\n                                    <div class="col-md-12">\n                                        <div class="form-group">\n                                            <label>Observación</label>\n                                            <textarea name="observacion" class="form-control"></textarea>                          \n                                        </div>\n                                    </div>\n                                    \n                                                    \n                                </div>\n                            </div>\n                            <div class="modal-footer" align="center" style="display:block">\n                                <button type="button" name="cerrar" class="btn btn-white pull-left" data-dismiss="modal">Cerrar</button>\n                                <button type="submit" name="submit" class="btn btn-primary">Guardar</button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n\n            \x3c!-- MODAL DELETE --\x3e\n            <div class="modal inmodal fade" name="modal-delete" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">\n                <div class="modal-dialog modal-sm">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>\n                            <h4 name="delete" class="modal-title">Modal title</h4>\n                        </div>\n                        <form name="delete">\n                            <div class="row">\n                                <div class="col-md-12" align="center">\n                                    <i class="fad fa-trash-alt fa-4x"></i><br/>\n                                </div>\n                                <div class="col-md-12"  align="center" style="padding-top:10px;">\n                                    <label><input type="checkbox" name="confirmacion" required/>\n                                        Confirmo realizar la anulación</label>\n                                    <p style="color:red;">Esta acción no se podrá revertir</p>\n                                </div>\n                                <div class="col-md-12" name="texto" align="center">\n\n                                </div>\n                            </div>\n                            <div class="modal-footer" align="center" style="display:block" >\n                                <button type="button" name="cerrar" class="btn btn-white" data-dismiss="modal">Cerrar</button>\n                                <button type="submit" name="submit" class="btn btn-danger">Anular Ahora!</button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n\n            \x3c!-- MODAL SAVE CIERRE --\x3e\n            <div class="modal inmodal fade" name="modal-save_cierre" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>\n                            <h4 name="save_cierre" class="modal-title">Modal title</h4>\n                        </div>\n                        <form name="save_cierre">                            \n                            <div class="modal-body" style="display:block" >\n                                <div class="row">\n                                    <div class="col-md-12">\n                                        <div class="form-group">\n                                            <label>Usuario de Sistema</label>\n                                            <div class="form-group">\n                                                <input type="text" class="form-control" value="'+GLOBAL.usuario.nombre+" "+GLOBAL.usuario.apellido+'" readonly />\n                                            </div>                              \n                                        </div>\n                                    </div>\n                                    <div class="col-md-4">\n                                        <div class="form-group">\n                                            <label>Fecha Apertura<span class="text-red">(*)</span></label>\n                                            <div class="form-group">\n                                                <input type="text" class="form-control" name="fecha_apertura" disabled />\n                                            </div>                              \n                                        </div>\n                                    </div>\n                                    <div class="col-md-4">\n                                        <div class="form-group">\n                                            <label>Fecha Cierre<span class="text-red">(*)</span></label>\n                                            <div class="form-group">\n                                                <input type="date" class="form-control" name="fecha" required />\n                                            </div>                              \n                                        </div>\n                                    </div>\n                                    <div class="col-md-4">\n                                        <div class="form-group">\n                                            <label>Hora Cierre<span class="text-red">(*)</span></label>\n                                            <div class="form-group">\n                                            <input type="time" class="form-control" name="hora" required />\n                                            </div>                              \n                                        </div>\n                                    </div>\n                                    <div class="col-md-12">\n                                       <table class="table table-striped" style="width:100%;">\n                                            <tr>\n                                                <td>SALDO INICIAL</td>\n                                                <td>'+GLOBAL.moneda_sistema.simbolo+' <span name="cierre-saldo_inicial" style="float:right;"></span></td>\n                                            </tr>\n                                            <tr>\n                                                <td>INGRESOS</td>\n                                                <td>'+GLOBAL.moneda_sistema.simbolo+' <span name="cierre-total_ingreso" style="float:right;"></span></td>\n                                            </tr>\n                                            <tr>\n                                                <td>EGRESOS</td>\n                                                <td>'+GLOBAL.moneda_sistema.simbolo+' <span name="cierre-total_egreso" style="float:right;"></span></td>\n                                            </tr>\n                                            <tr>\n                                                <td colspan="2" style="border-bottom:solid; border-width:1px;"></td>\n                                            </tr>\n                                            <tr>\n                                                <td>SALDO FINAL</td>\n                                                <td>'+GLOBAL.moneda_sistema.simbolo+' <span name="cierre-total_saldo" style="float:right;"></span></td>\n                                            </tr>\n                                       </table>\n                                    </div>\n                                    <div class="col-md-12"  align="center" style="padding-top:10px;">\n                                        <label><input type="checkbox" name="confirmacion" required/>\n                                            Confirmo realizar el cierre de caja</label>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="modal-footer" align="center" style="display:block" >\n                                <button type="button" name="cerrar" class="btn btn-white" data-dismiss="modal">Cerrar</button>\n                                <button type="submit" name="submit" class="btn btn-danger">Cerrar Caja</button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        \n\n        </div>            \n        ',l.after_render()},after_render:async()=>{s="#main",o=$(s),o.find('form[name="save"]').validate({rules:{fecha:{required:!0},motivo:{required:!0},modalidad:{required:!0},id_moneda:{required:!0},importe:{required:!0},descripcion:{required:!0},id_cuenta_bancaria_persona:{required:!0},cuenta_bancaria_persona:{required:!0},tipo_cambio:{required:!0}},messages:{fecha:"Fecha",motivo:"Motivo",modalidad:"Modalidad",id_moneda:"Moneda",importe:"Importe",descripcion:"Descripción",id_cuenta_bancaria_persona:"Cuenta Bancaria de la Persona",cuenta_bancaria_persona:"Cuenta Bancaria de la Persona",tipo_cambio:"Tipo Cambio"},submitHandler:function(){l.submit()}}),o.find('form[name="save_apertura"]').validate({submitHandler:function(){l.submit_apertura()}}),o.find('form[name="save_cierre"]').validate({submitHandler:function(){l.submit_cierre()}}),o.on("click",'button[name="update_datatable"]',(function(a){a.stopImmediatePropagation(),l.table.ajax.reload(null,!1)})),o.find('form[name="delete"]').validate({submitHandler:function(){l.submit()}}),o.on("click",'button[name="nuevo"]',(function(a){a.stopImmediatePropagation(),l.new()})),o.on("click",'button[name="cerrar_caja"]',(function(a){a.stopImmediatePropagation(),l.cerrar_caja()})),o.on("click",'button[name="row-print"]',(function(a){a.stopImmediatePropagation();let n=HELPER.get_attr_json($(this));e.Z.print(n.id)})),o.on("click",'a[name="row-edit"]',(function(a){a.stopImmediatePropagation(),l.edit($(this))})),o.on("click",'a[name="row-delete"]',(function(a){a.stopImmediatePropagation(),l.delete($(this))})),o.on("change",'select[name="tipo_movimiento"]',(function(a){a.stopImmediatePropagation(),1==l.fl_auto_event&&l.change_tipo_movimiento()})),o.on("change",'select[name="tipo_persona"]',(function(a){a.stopImmediatePropagation(),1==l.fl_auto_event&&(l.change_tipo_persona(),l.select_cuenta_bancaria_persona())})),o.on("change",'select[name="id_tipo_persona"]',(function(a){a.stopImmediatePropagation(),1==l.fl_auto_event&&(l.select_cuenta_bancaria_persona(),l.change_id_tipo_persona())})),o.on("change",'select[name="id_cuenta_bancaria_persona"]',(function(a){a.stopImmediatePropagation(),1==l.fl_auto_event&&l.change_id_cuenta_bancaria_persona()})),o.on("change",'input[name="modalidad"]',(function(a){a.stopImmediatePropagation(),1==l.fl_auto_event&&l.change_tipo_persona()})),o.on("change",'select[name="id_moneda"]',(function(a){a.stopImmediatePropagation(),1==l.fl_auto_event&&(l.select_cuenta_bancaria_empresa(),l.change_moneda())})),o.on("change",'select[name="id_atencion"]',(function(a){a.stopImmediatePropagation(),1==l.fl_auto_event&&l.change_atencion()})),o.find('input[name="fecha_inicio"]').val(HELPER.fecha_actual()),o.find('input[name="fecha_fin"]').val(HELPER.fecha_actual()),await l.verificar_caja_chica_existente(),await l.select_atencion(),await l.select_cuenta_bancaria_empresa(),await l.select_moneda(),HELPER.load_component()},id:null,action_submit:null,imagen_anterior:null,fl_auto_event:!0,id_caja_chica:null,change_tipo_movimiento:()=>{let a=o.find('select[name="tipo_movimiento"]').val();"EGRESO"==a?(o.find('select[name="id_atencion"]').prop("disabled",!1),o.find('input[name="modalidad"]').prop("readonly",!1),o.find('div[data-contenedor="tipo_persona"]').show("slow")):"INGRESO"==a&&(o.find('select[name="id_atencion"]').prop("disabled",!0),o.find('input[name="modalidad"]').val("EFECTIVO"),o.find('input[name="modalidad"]').prop("readonly",!0),o.find('div[data-contenedor="tipo_persona"]').hide("fast")),l.change_tipo_persona()},verificar_caja_chica_existente:async()=>{await axios.get(BASE_API+"tesoreria/caja_chica/verificar_caja_chica_existente").then((async function(a){o.find('div[data-contenedor="caja_chica_cerrado"]').hide("slow"),o.find('div[data-contenedor="caja_chica_abierto"]').hide("slow"),null==a.data.caja_chica?(null!=a.data.ultima_caja&&o.find('input[name="saldo_inicial"]').val(a.data.ultima_caja.total_saldo),o.find('div[data-contenedor="caja_chica_cerrado"]').show("slow")):"ABIERTO"==a.data.caja_chica.estado?(l.id_caja_chica=a.data.caja_chica.id,l.datatable(),o.find('div[data-contenedor="caja_chica_abierto"]').show("slow"),o.find('span[name="saldo_inicial"]').attr("value_contador_animate",a.data.caja_chica.saldo_inicial),o.find('span[name="total_ingreso"]').attr("value_contador_animate",a.data.caja_chica.total_ingreso),o.find('span[name="total_egreso"]').attr("value_contador_animate",a.data.caja_chica.total_egreso),o.find('span[name="total_saldo"]').attr("value_contador_animate",a.data.caja_chica.total_saldo),HELPER.counter_animate(1e3,2)):o.find('div[data-contenedor="caja_chica_cerrado"]').show("slow")})).catch((a=>{console.log(a)}))},actualizar_totales:()=>{axios.get(BASE_API+"tesoreria/caja_chica/get_totales/"+l.id_caja_chica).then((async function(a){o.find('span[name="saldo_inicial"]').text(a.data.saldo_inicial),o.find('span[name="total_ingreso"]').text(a.data.total_ingreso),o.find('span[name="total_egreso"]').text(a.data.total_egreso),o.find('span[name="total_saldo"]').text(a.data.total_saldo)})).catch((a=>{console.log(a)}))},change_moneda:async(a=!0)=>{let n=o.find('select[name="id_moneda"]').val();1==n?(o.find('input[name="tipo_cambio"]').prop("disabled",!0),o.find('input[name="tipo_cambio"]').val("")):""!=n&&(o.find('input[name="tipo_cambio"]').prop("disabled",!1),a&&o.find('input[name="tipo_cambio"]').val(await HELPER.get_tipo_cambio(n)))},change_atencion:async()=>{let a=o.find('select[name="id_atencion"]').val();null!=a?await axios.get(BASE_API+"tesoreria/caja/get_atencion/"+a).then((function(a){o.find('select[name="id_moneda"]').val(a.data.id_moneda).change(),o.find('div[data-campo="fl_no_liquidacion_atencion"]').show()})).catch((a=>{console.log(a)})):(o.find('div[data-campo="fl_no_liquidacion_atencion"]').hide(),o.find('input[name="fl_no_liquidacion_atencion"]').prop("checked",!1))},select_moneda:async()=>{let a=o.find('select[data-select="MONEDA"]');await axios.get(BASE_API+"recursos/data_static/moneda").then((function(n){let t='<option value="">Seleccione...</option>';n.data.forEach((a=>{t+='<option value="'+a.id+'">'+a.text+"</option>"})),a.html(t),a.select2()})).catch((a=>{console.log(a)}))},change_id_tipo_persona:async()=>{if("OTRO"!=o.find('select[name="tipo_persona]').val()){let a=o.find('select[name="id_tipo_persona"] option:selected').text();o.find('input[name="nombre_persona"]').val(a)}},change_id_cuenta_bancaria_persona:async()=>{if("OTRO"!=o.find('select[name="tipo_persona]').val()){let a=o.find('select[name="id_cuenta_bancaria_persona"] option:selected').text();o.find('input[name="cuenta_bancaria_persona"]').val(a)}},select_cuenta_bancaria_persona:async()=>{let a=o.find('select[name="id_tipo_persona"]').val(),n=o.find('select[name="tipo_persona"]').val(),t=o.find('select[data-select="ID_CUENTA_BANCARIA_PERSONA"]');t.empty(),t.append($("<option></option>").attr("value","").text("Seleccione...")),""!=a&&null!=a&&await axios.get(BASE_API+"configuracion/cuenta_bancaria_persona/get_select?tipo="+n+"&id="+a).then((function(a){a.data.forEach((a=>{t.append('<option value="'+a.id+'">'+a.text+"</option>")})),t.select2()})).catch((a=>{console.log(a)}))},change_tipo_persona:async()=>{let a,n=o.find('select[name="tipo_persona"]').val(),t=!0;o.find('div[data-campo="id_tipo_persona"]').show(),o.find('select[name="id_tipo_persona"]').prop("disabled",!1),o.find('div[data-campo="nombre_persona"]').hide(),"OTRO"!=n?a=BASE_API+"configuracion/personal/get_select?tipo="+n:(t=!1,o.find('select[name="id_tipo_persona"]').prop("disabled",!0),o.find('div[data-campo="id_tipo_persona"]').hide(),o.find('div[data-campo="nombre_persona"]').show()),t&&await l.select_tipo_persona(a);let e=o.find('input[name="modalidad"]').val();o.find('select[name="id_cuenta_bancaria_persona"]').prop("disabled",!1),o.find('input[name="cuenta_bancaria_persona"]').prop("disabled",!1),o.find('div[data-campo="id_cuenta_bancaria_persona"]').show(),o.find('div[data-campo="cuenta_bancaria_persona"]').hide(),"EFECTIVO"!=e?"OTRO"==n?(o.find('select[name="id_cuenta_bancaria_persona"]').prop("disabled",!0),o.find('div[data-campo="id_cuenta_bancaria_persona"]').hide(),o.find('div[data-campo="cuenta_bancaria_persona"]').show()):(o.find('div[data-campo="id_cuenta_bancaria_persona"]').show(),o.find('div[data-campo="cuenta_bancaria_persona"]').hide()):(o.find('select[name="id_cuenta_bancaria_persona"]').prop("disabled",!0),o.find('input[name="cuenta_bancaria_persona"]').prop("disabled",!0))},select_tipo_persona:async a=>{let n=o.find('select[data-select="ID_TIPO_PERSONA"]');await axios.get(a).then((function(a){let t='<option value="">Seleccione...</option>';a.data.forEach((a=>{t+='<option value="'+a.id+'">'+a.text+"</option>"})),n.html(t),n.select2()})).catch((a=>{console.log(a)}))},select_cuenta_bancaria_empresa:async()=>{let a=o.find('select[data-select="CUENTA_BANCARIA_EMPRESA"]');a.empty(),a.append($("<option></option>").attr("value","").text("Seleccionar..."));let n=o.find('select[name="id_moneda"]').val();""!=n&&await axios.get(BASE_API+"configuracion/cuenta_bancaria_empresa/get_select?id_moneda="+n).then((function(n){n.data.forEach((n=>{a.append('<option value="'+n.id+'">'+n.text+"</option>")})),a.select2()})).catch((a=>{console.log(a)}))},select_atencion:async()=>{o.find('select[data-select="VIAJE"]').select2({ajax:{url:BASE_API+"operacion/atencion/get_select",dataType:"json",delay:250,data:function(a){return{buscar:a.term}},processResults:function(a,n){return{results:a}},cache:!0},escapeMarkup:function(a){return a},placeholder:"Buscar por Serie-Número o dia/mes/año ",minimumInputLength:6,allowClear:!0})},datatable:function(){this.table=o.find('table[name="registros"]').DataTable({ajax:{url:BASE_API+"tesoreria/caja/index_caja_chica",data:function(a){a.fecha_inicio=o.find('input[name="fecha_inicio"]').val(),a.fecha_fin=o.find('input[name="fecha_fin"]').val(),a.id_caja_chica=l.id_caja_chica}},columns:[{title:"ACCIÓN",defaultContent:"",render:function(a,n,t){let e='\n                            <div class="btn-group" style="width:120px;">\n                                <button type="button" class="btn btn-default btn-sm" name="row-print"><i class="fa fa-print"></i></button>     \n                                <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown">\n                                      <i class="fa fa-angle-down"></i>\n                                </button>\n                                ';return null==t.id_orden_pago&&null==t.id_factura_pago&&(e+='\n                                        <ul class="dropdown-menu dropdown-menu-left" role="menu">\n                                            <li><a class="dropdown-item" name="row-edit" href="javascript:"><i class="far fa-pencil"></i> Editar</a></li>\n                                            <li><a class="dropdown-item" name="row-delete" href="javascript:"><i class="far fa-ban"></i> Anular</a></li>\n                                        </ul>\n                                        '),e+="\n                            </div>\n                        ",e},width:"100px"},{title:"T. MOV.",mData:"tipo_movimiento"},{title:"FECHA",render:function(a,n,t){return HELPER.fecha(t.fecha)}},{title:"NÚMERO",mData:"caja"},{title:"MOTIVO",mData:"motivo"},{title:"MODALIDAD",mData:"modalidad"},{title:"IMPORTE",render:function(a,n,t){return'<span style="float:left;">'+t.simbolo_moneda+"</span> "+t.importe},class:"text-right"},{title:"TIPO CAMBIO",mData:"tipo_cambio"},{title:"DESCRIPCION",mData:"descripcion"},{title:"ATENCION",mData:"atencion"},{title:"PERSONA",mData:"nombre_persona"},{title:"ESTADO",defaultContent:"",render:function(a,n,t){let e="";return 0==t.fl_estado?e='\n                                <small class="label label-danger"> ANULADO</small>\n                            ':1==t.fl_estado?e='\n                                <small class="label label-default"> EN EVALUACIÓN</small>\n                            ':2==t.fl_estado?e='\n                                <small class="label label-primary"> APROBADO</small>\n                            ':3==t.fl_estado&&(e='\n                                <small class="label label-success"> PROCESADO</small>\n                            '),e}},{title:"COMENTARIO",mData:"comentario_autorizacion",visible:"CAJA_RAPIDA"!=l.tipo}],createdRow:function(a,n,t){$(a).attr("data-json",JSON.stringify(n)),0==n.fl_estado&&($(a).css("text-decoration","line-through"),$(a).css("color","red"))}})},cerrar_caja:async()=>{let a="save_cierre",n=o.find('form[name="save_cierre"]');o.find('h4[name="'+a+'"]').text("Cierre de Caja "),HELPER.reset_form(n),await axios.get(BASE_API+"tesoreria/caja_chica/get_totales/"+l.id_caja_chica).then((async function(a){o.find('span[name="cierre-saldo_inicial"]').text(a.data.saldo_inicial),o.find('span[name="cierre-total_ingreso"]').text(a.data.total_ingreso),o.find('span[name="cierre-total_egreso"]').text("-"+a.data.total_egreso),o.find('span[name="cierre-total_saldo"]').text(a.data.total_saldo),n.find('input[name="fecha_apertura"]').val(HELPER.fecha(a.data.fecha_apertura,"DD/MM/YYYY h:mm a"))})).catch((a=>{console.log(a)})),n.find('input[name="fecha"]').val(HELPER.fecha(null,"YYYY-MM-DD")),n.find('input[name="hora"]').val(HELPER.fecha(null,"HH:mm")),l.action_submit=a,o.find('div[name="modal-'+a+'"]').modal("show")},get_correlativo:async()=>{await axios.get(BASE_API+"tesoreria/caja/get_correlativo").then((function(a){o.find('input[name="numero"]').val(a.data.numero),o.find('input[name="serie"]').val(a.data.serie)})).catch((a=>{console.log(a)}))},new:function(){let a=o.find('form[name="save"]');o.find('h4[name="save"]').text("Nuevo "),HELPER.reset_form(a),a.find('input[name="fecha"]').val(HELPER.fecha_actual()),this.get_correlativo(),a.find('select[name="id_moneda"]').val(1).change(),this.id=null,this.action_submit="save",o.find('div[data-campo="fl_no_liquidacion_atencion"]').hide(),o.find('tbody[name="detalle-cuenta_bancaria"]').html(""),o.find('div[name="modal-save"]').modal("show")},edit:async a=>{let n=o.find('form[name="save"]');o.find('h4[name="save"]').text("Editar "),HELPER.reset_form(n),o.find('div[data-campo="fl_no_liquidacion_atencion"]').hide();let t=HELPER.get_attr_json(a);l.fl_auto_event=!1,n.find('select[name="tipo_movimiento"]').val(t.tipo_movimiento).change(),await l.change_tipo_movimiento(),n.find('input[name="fecha"]').val(t.fecha),n.find('input[name="serie"]').val(t.serie),n.find('input[name="numero"]').val(t.numero),null!=t.id_atencion&&(n.find('select[name="id_atencion"]').html(""),n.find('select[name="id_atencion"]').append(new Option(t.atencion,t.id_atencion))),n.find('input[name="descripcion"]').val(t.descripcion),n.find('input[name="motivo"]').val(t.motivo).change(),n.find('input[name="modalidad"]').val(t.modalidad),n.find('input[name="importe"]').val(t.importe),n.find('select[name="tipo_persona"]').val(t.tipo_persona).change(),n.find('input[name="fl_no_liquidacion_atencion"]').prop("checked",parseInt(t.fl_no_liquidacion_atencion)),await l.change_atencion(),await l.change_tipo_persona(),n.find('select[name="id_tipo_persona"]').val(t.id_tipo_persona).change(),n.find('input[name="nombre_persona"]').val(t.nombre_persona),await l.change_tipo_persona(),n.find('select[name="id_moneda"]').val(t.id_moneda).change(),await l.change_moneda(!1),n.find('input[name="tipo_cambio"]').val(t.tipo_cambio),n.find('select[name="id_tipo_persona"]').val(t.id_tipo_persona).change(),await l.select_cuenta_bancaria_persona(),n.find('select[name="id_cuenta_bancaria_persona"]').val(t.id_cuenta_bancaria_persona).change(),n.find('input[name="cuenta_bancaria_persona"]').val(t.cuenta_bancaria_persona),await l.select_cuenta_bancaria_empresa(),n.find('select[name="id_cuenta_bancaria_empresa"]').val(t.id_cuenta_bancaria_empresa).change(),n.find('textarea[name="observacion"]').html(t.observacion),l.fl_auto_event=!0,l.id=t.id,l.action_submit="save",o.find('div[name="modal-save"]').modal("show")},delete:function(a){let n="delete",t=o.find('form[name="'+n+'"]');o.find('h4[name="'+n+'"]').text("Anular Caja"),HELPER.reset_form(t);let e=HELPER.get_attr_json(a);t.find('div[name="texto"]').text(e.serie+"-"+e.numero),this.id=e.id,this.action_submit=n,o.find('div[name="modal-'+n+'"]').modal("show")},submit:function(){let a=HELPER.ladda(s+' form[name="'+this.action_submit+'"] button[type="submit"]'),n=new FormData(document.querySelector(s+' form[name="'+this.action_submit+'"]'));null!=this.id&&n.append("id",this.id),n.append("id_caja_chica",l.id_caja_chica),axios({method:"post",url:BASE_API+"tesoreria/caja_chica/"+this.action_submit,data:n}).then((function(n){l.table.ajax.reload(null,!1),l.actualizar_totales(),o.find('div[name="modal-'+l.action_submit+'"]').modal("hide"),HELPER.notificacion(n.data.mensaje,"success"),"save"==l.action_submit&&e.Z.print(n.data.id_caja),a.stop()})).catch((n=>{a.stop()}))},submit_apertura:function(){let a=HELPER.ladda(s+' form[name="save_apertura"] button[type="submit"]'),n=new FormData(document.querySelector(s+' form[name="save_apertura"]'));null!=this.id&&n.append("id",this.id),axios({method:"post",url:BASE_API+"tesoreria/caja_chica/save_apertura",data:n}).then((function(n){l.verificar_caja_chica_existente(),HELPER.notificacion(n.data.mensaje,"success"),a.stop()})).catch((n=>{a.stop()}))},submit_cierre:function(){let a=HELPER.ladda(s+' form[name="save_cierre"] button[type="submit"]'),n=new FormData(document.querySelector(s+' form[name="save_cierre"]'));n.append("id_caja_chica",l.id_caja_chica),axios({method:"post",url:BASE_API+"tesoreria/caja_chica/save_cierre",data:n}).then((function(n){i.default.imprimir(l.id_caja_chica),l.verificar_caja_chica_existente(),o.find('div[name="modal-save_cierre"]').modal("hide"),HELPER.notificacion(n.data.mensaje,"success"),a.stop()})).catch((n=>{a.stop()}))}};const d=l},376:(a,n,t)=>{t.d(n,{Z:()=>i});var e=t(178);const i={print:async a=>{await axios.get(BASE_API+"tesoreria/caja/print/"+a).then((function(a){let n=a.data,t='<div style="max-width:842px; margin:auto;">';0==n.fl_estado&&(t+='\n                \n                <style>\n                    #marca_agua_anulado {\n                        position: relative;\n                    }\n\n                    .rotar_texto\n                    {                \n                        position: absolute;\n                        margin-top:30%;\n                        top: 50%;\n                        left: 50%;\n                        transform: translate(-50%, -50%);\n                        font-size:60px;\n                        opacity: 0.5;\n                    }\n                </style>       \n\n                <div id="marca_agua_anulado">\n                    <span class="rotar_texto" style="color:#d5062a; font-weight:bold;">ANULADO</span>\n                </div>'),t+='\n \n             <table  style="width:100%;">\n                 <tr>\n                     <td style="width:65%;">\n                         <img src="'+BASE_FILES+"images/"+n.empresa.logo+'" style="max-height:70px;"/>\n                         <div style="font-weight:bold; text-align:left;"><strong>'+n.empresa.razon_social+"</strong></div>\n                         <div>"+n.empresa.direccion+"</div>\n                         <div>"+n.empresa.telefono+"</div>\n                         <div>"+n.empresa.email+'</div>\n                     </td>\n                     <td style="width:35%;">\n                         <div style="text-align:center; background-color:#eeeeee !important; border: 1px solid #bebdbd !important; border-radius:8px; padding:8px;">\n                             <div style="font-size:18px;" ><strong style="font-size:14px">RUC : '+n.empresa.numero_documento+'</strong></div>\n                             <div style="font-weight:bold; font-size:18px;">RECIBO DE CAJA</div>\n                             <div  style="font-weight:bold; font-size:18px;"><strong>'+n.caja+'</strong></div>\n                         </div>\n                     </td>\n                 </tr>\n                 <tr>\n                     <td colspan="2" vertical-align:top;">\n                         <div style="background-color:#fff !important; border: 1px solid #bebdbd !important; border-radius:8px; margin-top:10px; padding:5px; min-height:80px;">\n                             <table style="width:100%;">\n                                <tr>\n                                     <td style="width:150px;"><strong>FECHA EMISIÓN :</strong></td>\n                                     <td>'+HELPER.fecha(n.fecha)+'</td>\n                                 </tr>\n                                 <tr>\n                                     <td colspan="2"><strong>NOMBRE COMPLETO</strong></td>\n                                 </tr>\n                                 <tr>\n                                     <td colspan="2">'+n.nombre_persona+'</td>\n                                 </tr>\n                                 <tr>\n                                    <td colspan="2"><strong>DESCRIPCION</strong></td>\n                                </tr>\n                                <tr>\n                                    <td colspan="2">'+n.descripcion+'</td>\n                                </tr>\n\n                             </table>\n                         </div>                    \n                     </td>\n                 </tr>\n                 <tr>\n                     <td colspan="2">\n                         <table class="detalle" style="width:100%; margin-top:10px; border-collapse:collapse;">\n                             <thead>\n                                 <tr>\n                                     <th style="font-weight:bold;  background-color:#eeeeee; border: 1px solid #bebdbd !important; border-width:1px 0 1px 1px !important; text-align:center;">ATENCION</th>\n                                     <th style="font-weight:bold; background-color:#eeeeee; border: 1px solid #bebdbd !important; border-width:1px 0 1px 0 !important; text-align:left; min-width:250px !important;">MOTIVO</th>\n                                     <th style="font-weight:bold; width:130px; background-color:#eeeeee; border: 1px solid #bebdbd !important; border-width:1px 0 1px 0 !important; width:100px !important; text-align:right;">MODALIDAD.</th>\n                                     <th style="font-weight:bold;background-color:#eeeeee; border: 1px solid #bebdbd !important; border-width:1px 1px 1px 0 !important; text-align:right;">CUENTA BANCARIA</th>                                \n                                 </tr>\n                             </thead>                            \n                             <tbody><tr>\n                                         <td style="text-align:center;">'+n.atencion+"</td>\n                                         <td>"+n.motivo+'</td>\n                                         <td style="text-align:right;">'+n.modalidad+'</td>\n                                         <td style="text-align:right;">'+n.cuenta_bancaria_persona+'</td>\n                                     </tr>\n                            </tbody>\n                             <tfoot>\n                                 <tr>\n                                     <td colspan="2" name="informacion_adicional"></td>\n                                     <td colspan="2" valign="top">\n                                         <div style="border:none;  margin-top:5px;">\n                                             <table style="width:100%; border-collapse:collapse;">\n                                                 <tr>\n                                                     <td style="font-weight:bold; font-size:11px !important; border-collapse:collapse;" align="left">\n                                                         <div><strong>TOTAL:</strong></div>\n                                                     </td>\n                                                     <td  align="right" style="font-size:11px !important; border-collapse:collapse;">\n                                                         <div>'+n.simbolo_moneda+" "+n.importe+'</div>\n                                                     </td>\n                                                 </tr>\n                                             </table>\n                                         </div>\n                                     </td>\n                                 </tr>\n                                 <tr>\n                                     <td colspan="8" align="center" style="padding-bottom:10px;">\n                                         <strong>MONTO EN LETRAS: </strong> '+e.Z.convertir(n.importe,n.moneda)+'\n                                     </td>\n                                 </tr>\n                                 <tr>\n                                     <td colspan="8" align="center">'+n.observacion+"</td>\n                                 </tr>\n                             </tfoot>\n                         </table>\n                     </td>\n                 </tr>\n             </table>",HELPER.print(t)})).catch((a=>{console.log(a)}))}}},373:(a,n,t)=>{let e,i;t.r(n),t.d(n,{default:()=>s});let o={render:async a=>{$("#main").off(),a.innerHTML='\n\n        <div id="main">\n            \x3c!-- Content Header (Page header) --\x3e\n            <section class="content-header">\n                <div class="row">\n                    <div class="col-md-8 content-header" style="padding-top:5px;">\n                        <h1 style="margin:0; ">\n                            Caja chica\n                            <small>Reportes</small>\n                        </h1>\n                    </div>       \n                </div>\n            </section>\n\n            \x3c!-- Main content --\x3e\n            <section class="content">\n\n            \n                \x3c!-- Default box --\x3e\n                <div class="box box-warning">\n                    <div class="box-body">\n                        <div class="row">        \n                            <div class="col-md-2">\n                                <div class="form-group">\n                                    <label>Fecha Desde</label>\n                                    <input type="date" data-filtro="fecha_inicio" class="form-control" autocomplete="off">\n                                </div>\n                            </div>\n                            <div class="col-md-2">\n                                <div class="form-group">\n                                    <label>Fecha Hasta</label>\n                                    <input type="date"  data-filtro="fecha_fin" class="form-control" autocomplete="off">\n                                </div>\n                            </div>\n                            <div class="col-md-4">\n                                <div class="form-group">\n                                    <label>Local Anexo</label>\n                                    <select data-filtro="id_local" data-select="LOCAL" class="form-control" autocomplete="off"></select>\n                                </div>\n                            </div>\n                            <div class="col-md-3">\n                                <div class="form-group">\n                                    <label>Usuario</label>\n                                    <select data-filtro="id_usuario" data-select="USUARIO" class="form-control" autocomplete="off"></select>\n                                </div>\n                            </div>\n                            <div class="col-md-1" style="padding-top:19px;">\n                                <button class="btn btn-warning" name="update_datatable"><i class="fa fa-search"></i> </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                \x3c!-- /.box --\x3e\n\n                \x3c!-- Default box --\x3e\n                <div class="box box-warning">\n                    <div class="box-body">\n                    <div class="table-responsive">\n                        <table name="registros" class="table table-striped table-bordered nowrap" style="width:100%;">\n                            <tfoot>\n                                <tr>\n                                    <th colspan="5"></th>\n                                    <th></th>\n                                    <th></th>\n                                    <th colspan="4"></th>\n                                </tr>\n                            </tfoot>\n                        </table>\n                    </div>\n                    </div>\n                </div>\n                \x3c!-- /.box --\x3e\n\n            </section>\n            \x3c!-- /.content --\x3e\n            \n\n        </div>            \n        ',await o.after_render()},imprimir:a=>{axios.get(BASE_API+"tesoreria/caja_chica/print/"+a).then((function(a){let n=a.data,t='\n                <table border="0" cellspacing="0" cellpadding="0" style="font-family:Arial, Helvetica, sans-serif; font-size:14px; max-width:350px;">\n                    <tr>\n                        <td style="text-align:center;">\n                            <img src="'+BASE_FILES+"images/"+n.empresa.logo_factura+'" style="width:250px;" />\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            <table width="100%" border="0" cellspacing="0" cellpadding="4">\n                                <tr>\n                                    <td align="center">'+n.empresa.razon_social+'</td>\n                                </tr>\n                                <tr>\n                                    <td align="center">RUC: '+n.empresa.numero_documento+'</td>\n                                </tr>\n                                <tr>\n                                    <td align="center"><strong>REPORTE DE CAJA CHICA</strong></td>\n                                </tr>\n                            </table>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            <table style="width:100%;">\n                                <tr>\n                                    <td>USUARIO:</td>\n                                    <td style="text-align:right;">'+n.caja_chica.usuario+'</td>                                    \n                                </tr>\n                                <tr>\n                                    <td>APERTURA:</td>\n                                    <td style="text-align:right;">'+HELPER.fecha_hora(n.caja_chica.fecha_apertura)+'</td>                                    \n                                </tr>\n                                <tr>\n                                    <td>CIERRE:</td>\n                                    <td style="text-align:right;">'+(null!=n.caja_chica.fecha_cierre?HELPER.fecha_hora(n.caja_chica.fecha_cierre):"-")+'</td>                                    \n                                </tr>\n                            </table>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td style="padding-top:10px; padding-bottom:10px;"><div style="border-top:dashed 1px #000;"></div></td>\n                    </tr>\n                    <tr>\n                        <td>\n                            <table style="width:100%;">\n                                <thead>\n                                    <tr>\n                                        <th>#</th>\n                                        <th>DESCRIPCIÓN</th>\n                                        <th>EGRESOS</th>\n                                        <th>INGRESOS</th>\n                                    </tr>\n                                </thead>\n                                <tbody>',e=0;a.data.detalle.forEach((a=>{e++;let n="-",i="-";switch(a.tipo_movimiento){case"EGRESO":n=parseFloat(a.importe).toFixed(2);break;case"INGRESO":i=parseFloat(a.importe).toFixed(2)}t+="\n                                        <tr>\n                                            <td>"+e+"</td>\n                                            <td>"+a.descripcion.substr(0,25)+'</td>\n                                            <td style="text-align:right;">'+n+'</td>\n                                            <td style="text-align:right;">'+i+"</td>\n                                        </tr>\n                                    "})),t+='\n                                </tbody>\n                            </table>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td style="padding-top:10px; padding-bottom:10px;"><div style="border-top:dashed 1px #000;"></div></td>\n                    </tr>\n                    <tr>\n                        <td>\n                            <table style="width:100%;">\n                                <tr>\n                                    <th></th>\n                                    <th>TOTALES</th>                                    \n                                </tr>\n                                <tr>\n                                    <td>SALDO INICIAL</td>\n                                    <td>'+GLOBAL.moneda_sistema.simbolo+' <span style="float:right;">'+n.caja_chica.saldo_inicial+"</span></td>                                    \n                                </tr>\n                                <tr>\n                                    <td>TOTAL INGRESOS</td>\n                                    <td>"+GLOBAL.moneda_sistema.simbolo+' <span style="float:right;">'+n.caja_chica.total_ingreso+'</span></td>                                    \n                                </tr>\n                                <tr>\n                                    <td>TOTAL EGRESOS</td>\n                                    <td style="border-bottom:solid; border-bottom-width:1px;">'+GLOBAL.moneda_sistema.simbolo+' <span style="float:right;">- '+n.caja_chica.total_egreso+"</span></td>                                    \n                                </tr>\n                                <tr>\n                                    <td>SALDO FINAL</td>\n                                    <td>"+GLOBAL.moneda_sistema.simbolo+' <span style="float:right;">'+n.caja_chica.total_saldo+'</span></td>                                    \n                                </tr>\n                            </table>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            <table style="width:100%;">\n                                <tr>\n                                    <td style="text-align:right; border-bottom:solid; border-bottom-width:1px; width:45%; padding-top:50px;"></td>\n                                    <td style="width:10%;"></td>\n                                    <td style="text-align:right; border-bottom:solid; border-bottom-width:1px; width:45%; padding-top:50px;"></td>\n                                </tr>\n                                <tr>\n                                    <td style="text-align:center;" >USUARIO</td>\n                                    <td ></td>\n                                    <td style="text-align:center;">SUPERVISOR</td>\n                                </tr>\n                            </table>\n                        </td>\n                    </tr>\n                </table>\n                \n            ',HELPER.print(t)})).catch((a=>{console.log(a)}))},after_render:async()=>{i="#main",e=$("#main"),e.find('input[data-filtro="fecha_inicio"]').val(HELPER.fecha(null,"YYYY-MM-DD")),e.find('input[data-filtro="fecha_fin"]').val(HELPER.fecha(null,"YYYY-MM-DD")),e.on("click",'button[name="update_datatable"]',(function(a){a.stopImmediatePropagation(),o.table.ajax.reload(null,!1)})),e.on("click",'button[data-name="print"]',(function(a){a.stopImmediatePropagation(),o.imprimir($(this).data("id_caja_chica"))})),e.on("click",'button[data-name="recalcular"]',(function(a){a.stopImmediatePropagation(),axios.get(BASE_API+"tesoreria/reporte/caja_chica/recalcular/"+$(this).data("id_caja_chica")).then((function(a){o.table.ajax.reload(null,!1)})).catch((a=>{console.log(a)}))})),o.select_local(),o.select_usuario(),o.datatable(),HELPER.load_component()},select_local:async()=>{let a=e.find('select[data-select="LOCAL"]');a.empty(),a.append($("<option></option>").attr("value","").text("TODOS")),await axios.get(BASE_API+"configuracion/local/get_select").then((function(n){n.data.forEach((n=>{a.append('<option value="'+n.id+'">'+n.text+"</option>")})),a.select2()})).catch((a=>{console.log(a)}))},select_usuario:async()=>{let a=e.find('select[data-select="USUARIO"]');a.empty(),a.append($("<option></option>").attr("value","").text("TODOS")),await axios.get(BASE_API+"configuracion/usuario/get_select").then((function(n){n.data.forEach((n=>{a.append('<option value="'+n.id+'">'+n.text+"</option>")})),a.select2()})).catch((a=>{console.log(a)}))},datatable:function(){this.table=e.find('table[name="registros"]').DataTable({ajax:{url:BASE_API+"tesoreria/reporte/caja_chica",data:function(a){a.fecha_inicio=e.find('input[data-filtro="fecha_inicio"]').val(),a.fecha_fin=e.find('input[data-filtro="fecha_fin"]').val(),a.id_local=e.find('select[data-filtro="id_local"]').val(),a.id_usuario=e.find('select[data-filtro="id_usuario"]').val()}},ordering:!1,columns:[{title:"ID",mData:"id",visible:!1},{title:"",render:function(a,n,t){return'\n                        <button data-name="print" data-id_caja_chica="'+t.id+'" class="btn btn-default btn-sm"><i class="fa fa-print"></i></button>\n                        <button data-name="recalcular" data-id_caja_chica="'+t.id+'" class="btn btn-default btn-sm" title="Recalcular"><i class="fa fa-sync"></i> Recalcular</button>\n                    '},class:"text-center"},{title:"LOCAL ANEXO",mData:"local"},{title:"FECHA APERTURA",render:function(a,n,t){return HELPER.fecha_hora(t.fecha_apertura,"DD/MM/YYYY h:mm:ss a")},class:"text-center"},{title:"SALDO INICIAL",render:function(a,n,t){return'<span style="float:left;">'+GLOBAL.moneda_sistema.simbolo+"</span> "+t.saldo_inicial},class:"text-right"},{title:"TOTAL INGRESO",render:function(a,n,t){return'<span style="float:left;">'+GLOBAL.moneda_sistema.simbolo+"</span> "+t.total_ingreso},class:"text-right"},{title:"TOTAL EGRESO",render:function(a,n,t){return'<span style="float:left;">'+GLOBAL.moneda_sistema.simbolo+"</span> "+t.total_egreso},class:"text-right"},{title:"TOTAL SALDO",render:function(a,n,t){return'<span style="float:left;">'+GLOBAL.moneda_sistema.simbolo+"</span> "+t.total_saldo},class:"text-right"},{title:"FECHA CIERRE",render:function(a,n,t){return HELPER.fecha_hora(t.fecha_cierre)},class:"text-center"},{title:"USUARIO",mData:"usuario",class:"text-center"},{title:"ESTADO",render:function(a,n,t){let e="";return"ABIERTO"==t.estado?e='<span class="label label-warning">ABIERTO</span>':"CERRADO"==t.estado&&(e='<span class="label label-success">CERRADO</span>'),e}}],footerCallback:function(a,n,t,e,i){let o=0,s=0,l=0,d=0;n.forEach((a=>{o+=parseFloat(a.saldo_inicial),s+=parseFloat(a.total_ingreso),l+=parseFloat(a.total_egreso),d+=parseFloat(a.total_saldo)}));let c=this.api();o=Math.round(100*o)/100,$(c.column(5).footer()).html('<span style="float:left;">'+GLOBAL.moneda_sistema.simbolo+'</span> <span style="float:right;">'+s.toFixed(2)+"</span>"),$(c.column(6).footer()).html('<span style="float:left;">'+GLOBAL.moneda_sistema.simbolo+'</span> <span style="float:right;">'+l.toFixed(2)+"</span>")},order:[[0,"asc"]]})}};const s=o}}]);